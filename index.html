<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>ì½©ì¼€ì–´</title>

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">

  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#64748b;
      --line:#e2e8f0; --blue:#2563eb; --soft:#eef2ff;
    }
    *{box-sizing:border-box}

    /* âœ… ìŠ¤í¬ë¡¤ ê°•ì œ ì•ˆì • */
    html, body{
      height:auto !important;
      min-height:100% !important;
      overflow-x:hidden !important;
      overflow-y:auto !important;
    }
    body{
      margin:0;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
      background:var(--bg); color:var(--text);
    }

    .wrap{max-width:560px;margin:0 auto;padding:18px}
    .top{text-align:center;margin:8px 0 14px}
    .title{font-size:30px;font-weight:900;margin:0}
    .subtitle{margin:8px 0 0;font-size:15px;color:#555;line-height:1.6}
    .meta{margin-top:10px;font-size:12px;color:var(--muted);line-height:1.5}

    .card{
      background:var(--card);
      border-radius:18px;
      padding:16px;
      margin:14px 0;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
      border:1px solid #f1f5f9;
    }
    .card h2{margin:0 0 10px;font-size:20px;font-weight:900}
    .sum{margin:0 0 8px;font-size:15px;font-weight:900;line-height:1.55}
    .where,.money{margin:0 0 8px;font-size:13px;line-height:1.55}
    .where{color:var(--muted)}

    .linkRow{display:grid;gap:10px;margin-top:10px}
    .linkItem{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .linkTop{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px}
    .linkA{flex:1;text-decoration:none;color:var(--text);font-weight:900;font-size:15px;line-height:1.35}
    button{touch-action:manipulation}
    .qrBtn{border:1px solid #cbd5e1;background:#f8fafc;border-radius:12px;padding:10px 12px;font-weight:900;cursor:pointer}
    .qrBox{display:none;border-top:1px dashed #cbd5e1;padding:12px;text-align:center;background:#fff}
    .qrBox img{width:160px;height:160px}
    .qrHint{font-size:12px;color:var(--muted);margin-bottom:8px}

    /* âœ… ìƒë‹¨ ì„¤ì¹˜ ì•ˆë‚´ ë°•ìŠ¤(í•­ìƒ í‘œì‹œ, ë‹«ê¸° ê°€ëŠ¥) */
    .installBanner{
      background:var(--soft);
      border:1px solid #c7d2fe;
      border-radius:16px;
      padding:14px;
      margin:12px 0 14px;
      text-align:left;
      position:relative;
    }
    .installBanner .t{font-weight:900;margin:0 0 8px}
    .installBanner .d{font-size:13px;line-height:1.55;margin:0 0 10px;color:#1f2937}
    .installBanner .btnRow{display:grid;gap:10px}
    .installBanner .btn{
      width:100%;
      border:0;
      background:var(--blue);
      color:#fff;
      border-radius:14px;
      padding:12px;
      font-weight:900;
      font-size:15px;
      cursor:pointer;
    }
    .installBanner .btn2{
      width:100%;
      border:1px solid var(--line);
      background:#fff;
      color:var(--text);
      border-radius:14px;
      padding:12px;
      font-weight:900;
      font-size:15px;
      cursor:pointer;
    }
    .installBanner .close{
      position:absolute;right:10px;top:10px;
      border:1px solid #cbd5e1;background:#fff;border-radius:10px;
      padding:6px 10px;font-weight:900;cursor:pointer;
    }
    .installBanner details{margin-top:10px}
    .installBanner summary{font-weight:900;cursor:pointer}
    .installBanner .mini{font-size:12px;color:var(--muted);line-height:1.5;margin-top:8px}

    /* âœ… í•˜ë‹¨ 3ì¢…ì„¸íŠ¸(ì ˆëŒ€ ê³ ì • ê¸ˆì§€) */
    .bottomPack{
      background:#fff;border:1px solid var(--line);
      border-radius:18px;padding:14px;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
      margin-top:18px;
    }
    .bottomTitle{font-weight:900;font-size:15px;margin:0 0 10px 0}
    .bottomRow{display:grid;gap:10px}
    .bottomLink{
      display:block;text-align:center;padding:14px;border-radius:14px;
      border:1px solid var(--line);background:#fff;text-decoration:none;color:var(--text);
      font-weight:900;font-size:16px
    }
    .bottomBtn{
      width:100%;border:0;background:var(--blue);color:#fff;border-radius:14px;
      padding:14px;font-weight:900;font-size:16px;cursor:pointer
    }
    .bottomQR{margin-top:12px;border:1px dashed #cbd5e1;background:#fff;border-radius:14px;padding:12px;text-align:center}
    .bottomQR .t{font-weight:900;font-size:14px;margin:0 0 8px}
    .bottomQR .s{font-size:12px;color:var(--muted);margin:0 0 10px;line-height:1.5}
    .bottomQR img{width:190px;height:190px}
    .foot{font-size:12px;color:var(--muted);text-align:center;line-height:1.5;margin:16px 0 0}
  </style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="title">ì½©ì¼€ì–´</div>
    <div class="subtitle">íˆ¬ì„í™˜ìÂ·ì‹ ì¥ì´ì‹ ëŒ€ê¸°ìë¥¼ ìœ„í•œ<br><b>ì—¬ìˆ˜ì‹œ ìš°ì„ </b> â€œìš”ì•½ + ì–´ë””ë¡œ + Direct ë§í¬â€</div>
    <div class="meta">â€» í™ˆí™”ë©´ ë°”ë¡œê°€ê¸° ì„¤ì¹˜ ì•ˆë‚´ ë°•ìŠ¤ëŠ” í•­ìƒ í‘œì‹œë©ë‹ˆë‹¤(ë‹«ê¸° ê°€ëŠ¥).</div>
  </div>

  <!-- âœ… ì„¤ì¹˜ ì•ˆë‚´ ë°•ìŠ¤(í•­ìƒ í‘œì‹œ) -->
  <div id="installBox" class="installBanner" aria-live="polite">
    <button class="close" onclick="hideInstallBox()">X</button>
    <p class="t">ğŸ“² ì½©ì¼€ì–´ë¥¼ â€œë°”íƒ•í™”ë©´ ì•±â€ìœ¼ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”</p>
    <p class="d">
      ì•ˆë“œë¡œì´ë“œ: ì˜¤ë¥¸ìª½ ìƒë‹¨ <b>â‹®</b> â†’ <b>í™ˆ í™”ë©´ì— ì¶”ê°€</b><br>
      ì•„ì´í°: <b>ê³µìœ </b> â†’ <b>í™ˆ í™”ë©´ì— ì¶”ê°€</b>
    </p>
    <div class="btnRow">
      <button class="btn" onclick="openInstallShare()">í™ˆí™”ë©´ ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ </button>
      <button class="btn2" onclick="location.href='/?install=1&v='+Date.now()">ì„¤ì¹˜ ì•ˆë‚´ ëª¨ë“œë¡œ ë‹¤ì‹œ ì—´ê¸°</button>
    </div>

    <details>
      <summary>ì„¤ì¹˜ê°€ ì•ˆ ë³´ì¼ ë•Œ(í•´ê²°)</summary>
      <div class="mini">
        1) ë°”íƒ•í™”ë©´ì˜ ì½©ì¼€ì–´ ì•„ì´ì½˜ ì‚­ì œ(ì´ë¯¸ ì„¤ì¹˜ëœ ê²½ìš°)<br>
        2) í¬ë¡¬ ìºì‹œ ì‚­ì œ í›„ ë‹¤ì‹œ ì ‘ì†<br>
        3) ì£¼ì†Œì°½ì— <b>?install=1&v=9999</b> ë¶™ì—¬ ì¬ì ‘ì†
      </div>
    </details>
  </div>

  <!-- âœ… ì˜ˆì‹œ ì¹´ë“œ(í˜•ì´ ì“°ë˜ ë‚´ìš© ìœ ì§€ ê°€ëŠ¥) -->
  <div class="card">
    <h2>â‘  ì¥ì• ì¸ ë“±ë¡(ì‹ ì¥ì¥ì• )</h2>
    <div class="sum">ìš”ì•½: ë³µì§€ í˜œíƒì˜ ì¶œë°œì </div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€ / ë³‘ì›(ì§„ë‹¨ì„œ)</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì—°ê¸ˆÂ·ê°ë©´Â·ë°”ìš°ì²˜ ì—°ê³„(í•­ëª©ë³„ ìƒì´)</div>

    <div class="linkRow">
      <div class="linkItem">
        <div class="linkTop">
          <a class="linkA" href="https://www.mohw.go.kr/menu.es?mid=a10710010900" target="_blank" rel="noopener">ë“±ë¡ ì ˆì°¨Â·ì¥ì• ì •ë„ì‹¬ì‚¬(ë³µì§€ë¶€)</a>
          <button class="qrBtn" onclick="toggleQR(this,'https://www.mohw.go.kr/menu.es?mid=a10710010900')">QR</button>
        </div>
        <div class="qrBox"></div>
      </div>
      <div class="linkItem">
        <div class="linkTop">
          <a class="linkA" href="https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000117" target="_blank" rel="noopener">ì¥ì• ì¸ ë“±ë¡ ì‹ ì²­(ì •ë¶€24)</a>
          <button class="qrBtn" onclick="toggleQR(this,'https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000117')">QR</button>
        </div>
        <div class="qrBox"></div>
      </div>
      <div class="linkItem">
        <div class="linkTop">
          <a class="linkA" href="https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000273" target="_blank" rel="noopener">ì¥ì• ì¸ì¦ëª…ì„œ ë°œê¸‰(ì •ë¶€24)</a>
          <button class="qrBtn" onclick="toggleQR(this,'https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000273')">QR</button>
        </div>
        <div class="qrBox"></div>
      </div>
    </div>
  </div>

  <!-- âœ… ë§¨ ì•„ë˜ ë¬´ì¡°ê±´ 3ì¢…ì„¸íŠ¸(ê³ ì • ê¸ˆì§€) -->
  <div class="bottomPack">
    <div class="bottomTitle">ğŸ“² ì½©ì¼€ì–´ ì•± ì„¤ì¹˜/ê³µìœ (ë°”íƒ•í™”ë©´ ë°”ë¡œê°€ê¸°)</div>
    <div class="bottomRow">
      <a class="bottomLink" href="https://kongcare.vercel.app/?install=1" target="_blank" rel="noopener">
        ì½©ì¼€ì–´ ì–´í”Œ ë§í¬ ì—´ê¸° (install=1)
      </a>
      <button class="bottomBtn" onclick="openInstallShare()">
        í™ˆí™”ë©´ ë°”ë¡œê°€ê¸° ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ 
      </button>
    </div>

    <div class="bottomQR">
      <p class="t">QR ì°ê³  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</p>
      <p class="s">ì•„ë˜ QRì€ <b>install=1</b> ë§í¬ì…ë‹ˆë‹¤. (ì„¤ì¹˜ ì•ˆë‚´ ìë™ í‘œì‹œ)</p>
      <img alt="ì½©ì¼€ì–´ ì„¤ì¹˜ QR"
           src="https://api.qrserver.com/v1/create-qr-code/?size=190x190&data=https%3A%2F%2Fkongcare.vercel.app%2F%3Finstall%3D1">
      <p class="s" style="margin-top:10px">QR ì´ë¯¸ì§€ëŠ” ì¹´í†¡ìœ¼ë¡œ ì €ì¥/ê³µìœ í•´ë„ ë©ë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="foot">
    â€» â€œì„¤ì¹˜ ì•ˆë‚´ ë°•ìŠ¤â€ëŠ” í•­ìƒ ë³´ì´ë©°, Xë¡œ ë‹«ìœ¼ë©´ í•˜ë£¨ ë™ì•ˆ ìˆ¨ê¹€ë©ë‹ˆë‹¤.
  </div>
</div>

<script>
  /* QR í† ê¸€ */
  function toggleQR(btn, url){
    const item = btn.closest('.linkItem');
    const box = item.querySelector('.qrBox');
    const open = box.style.display === 'block';
    if(open){ box.style.display='none'; box.innerHTML=''; return; }
    const imgUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=' + encodeURIComponent(url);
    box.innerHTML = '<div class="qrHint">QRì„ ì°ìœ¼ë©´ ì´ ë§í¬ë¡œ ë°”ë¡œ ì´ë™í•©ë‹ˆë‹¤</div><img alt="QR" src="'+imgUrl+'">';
    box.style.display='block';
  }

  /* ì„¤ì¹˜/ê³µìœ  */
  let deferredPrompt = null;
  window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; });

  async function openInstallShare(){
    const url = "https://kongcare.vercel.app/?install=1";
    const msg = "ì½©ì¼€ì–´ ë§í¬ì…ë‹ˆë‹¤: " + url;

    if(deferredPrompt){
      deferredPrompt.prompt();
      try{ await deferredPrompt.userChoice; }catch(e){}
      deferredPrompt = null;
      alert("ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì¹´í†¡ìœ¼ë¡œ ë§í¬ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.");
      return;
    }

    if(navigator.share){
      try{ await navigator.share({title:"ì½©ì¼€ì–´", text:msg, url}); return; }catch(e){}
    }
    try{
      await navigator.clipboard.writeText(msg);
      alert("ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ì¹´í†¡ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
    }catch(e){
      prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ ì¹´í†¡ì— ë³´ë‚´ì„¸ìš”:", msg);
    }
  }

  /* ì„¤ì¹˜ ë°•ìŠ¤ ë‹«ê¸°(í•˜ë£¨ ìˆ¨ê¹€) */
  function hideInstallBox(){
    const until = Date.now() + 24*60*60*1000;
    localStorage.setItem("kongcare_hide_installbox_until", String(until));
    document.getElementById("installBox").style.display = "none";
  }

  (function(){
    const until = Number(localStorage.getItem("kongcare_hide_installbox_until") || "0");
    if(Date.now() < until){
      document.getElementById("installBox").style.display = "none";
    }
  })();
</script>
</body>
</html>
