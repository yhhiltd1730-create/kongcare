<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>ì½©ì¼€ì–´</title>

  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#475569;
      --line:#e2e8f0; --blue:#2563eb; --soft:#eef2ff; --chip:#f1f5f9;
      --good:#16a34a; --warn:#f59e0b; --bad:#ef4444; --dark:#111827;
    }
    *{box-sizing:border-box}

    html, body{
      height:auto !important;
      min-height:100% !important;
      overflow-x:hidden !important;
      overflow-y:auto !important;
    }
    body{
      margin:0;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
      background:var(--bg); color:var(--text);
      font-size:16px;
    }
    button{touch-action:manipulation}
    a,button{min-height:44px}

    .wrap{max-width:620px;margin:0 auto;padding:18px}
    .top{text-align:center;margin:8px 0 10px}
    .title{font-size:32px;font-weight:900;margin:0; user-select:none}
    .subtitle{margin:10px 0 0;font-size:16px;color:#475569;line-height:1.6}
    .meta{margin-top:10px;font-size:13px;color:var(--muted);line-height:1.6}

    .guide{
      margin:12px 0 14px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      text-align:left;
      box-shadow:0 6px 16px rgba(0,0,0,.04);
      font-size:14px;
      line-height:1.6;
    }
    .guide b{font-weight:900}

    .card{
      background:var(--card);
      border-radius:18px;
      padding:16px;
      margin:14px 0;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
      border:1px solid #f1f5f9;
    }
    .pillRow{display:flex;justify-content:space-between;gap:10px;align-items:center;margin:0 0 10px}
    .card h2{margin:0;font-size:21px;font-weight:900;letter-spacing:-0.2px}
    .badge{
      display:inline-block;font-size:12px;font-weight:900;background:var(--soft);
      border:1px solid #e0e7ff;color:#3730a3;border-radius:999px;padding:7px 10px;white-space:nowrap;
    }
    .statusBadge{
      display:inline-block;font-size:12px;font-weight:900;
      border-radius:999px;padding:7px 10px;white-space:nowrap;
      border:1px solid var(--line); background:#fff;
    }
    .status-ok{color:var(--good); border-color:rgba(22,163,74,.35)}
    .status-warn{color:var(--warn); border-color:rgba(245,158,11,.45)}
    .status-bad{color:var(--bad); border-color:rgba(239,68,68,.45)}

    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 10px}
    .chip{
      display:inline-block;
      font-size:12px;font-weight:900;
      background:var(--chip);
      border:1px solid var(--line);
      border-radius:999px;
      padding:7px 10px;
      color:#0f172a;
    }

    .sum{margin:0 0 8px;font-size:16px;font-weight:900;line-height:1.6}
    .where,.money{margin:0 0 8px;font-size:14px;line-height:1.6}
    .where{color:var(--muted)}
    .money b{font-weight:900}

    .trust{
      margin-top:10px;
      font-size:13px;
      color:var(--muted);
      line-height:1.6;
      padding-top:10px;
      border-top:1px dashed #cbd5e1;
    }

    .linkRow{display:grid;gap:10px;margin-top:10px}
    .linkItem{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .linkTop{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px}
    .linkA{flex:1;text-decoration:none;color:var(--text);font-weight:900;font-size:16px;line-height:1.35}
    .qrBtn{
      border:1px solid #cbd5e1;background:#f8fafc;border-radius:12px;
      padding:10px 12px;font-weight:900;cursor:pointer;min-width:60px;
    }
    .qrBox{display:none;border-top:1px dashed #cbd5e1;padding:12px;text-align:center;background:#fff}
    .qrBox img{width:170px;height:170px}
    .qrHint{font-size:13px;color:var(--muted);margin-bottom:8px}

    .installBanner{
      background:var(--soft);
      border:1px solid #c7d2fe;
      border-radius:16px;
      padding:14px;
      margin:12px 0 14px;
      text-align:left;
      position:relative;
    }
    .installBanner .t{font-weight:900;margin:0 0 8px;font-size:15px}
    .installBanner .d{font-size:14px;line-height:1.6;margin:0 0 10px;color:#1f2937}
    .installBanner .btnRow{display:grid;gap:10px}
    .installBanner .btn{
      width:100%;
      border:0;
      background:var(--blue);
      color:#fff;
      border-radius:14px;
      padding:14px;
      font-weight:900;
      font-size:16px;
      cursor:pointer;
    }
    .installBanner .btn2{
      width:100%;
      border:1px solid var(--line);
      background:#fff;
      color:var(--text);
      border-radius:14px;
      padding:14px;
      font-weight:900;
      font-size:16px;
      cursor:pointer;
    }
    .installBanner .close{
      position:absolute;right:10px;top:10px;
      border:1px solid #cbd5e1;background:#fff;border-radius:10px;
      padding:6px 10px;font-weight:900;cursor:pointer;
    }
    .installBanner .mini{font-size:13px;color:var(--muted);line-height:1.6;margin-top:8px}

    .newsList{display:grid;gap:10px;margin-top:10px}
    .newsCard{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .newsHead{padding:12px;display:flex;gap:10px;justify-content:space-between;align-items:flex-start}
    .newsTitle{font-weight:900;font-size:16px;line-height:1.35;margin:0}
    .newsMeta{font-size:13px;color:var(--muted);margin-top:6px;line-height:1.5}
    .newsMoney{font-size:13px;margin-top:6px;line-height:1.5}
    .newsMoney b{font-weight:900}
    .newsActions{padding:0 12px 12px;display:flex;gap:10px}
    .newsBtn{
      flex:1;border:1px solid var(--line);background:#fff;border-radius:12px;
      padding:12px;font-weight:900;cursor:pointer;text-align:center;text-decoration:none;color:var(--text)
    }
    .tiny{font-size:13px;color:var(--muted);line-height:1.6;margin-top:8px}

    .bottomPack{
      background:#fff;border:1px solid var(--line);
      border-radius:18px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.06);
      margin-top:18px;
    }
    .bottomTitle{font-weight:900;font-size:16px;margin:0 0 10px 0}
    .bottomRow{display:grid;gap:10px}
    .bottomLink{
      display:block;text-align:center;padding:16px;border-radius:14px;
      border:1px solid var(--line);background:#fff;text-decoration:none;color:var(--text);
      font-weight:900;font-size:17px
    }
    .bottomBtn{
      width:100%;border:0;background:var(--blue);color:#fff;border-radius:14px;
      padding:16px;font-weight:900;font-size:17px;cursor:pointer
    }
    .bottomBtnDark{
      width:100%;border:0;background:var(--dark);color:#fff;border-radius:14px;
      padding:16px;font-weight:900;font-size:17px;cursor:pointer
    }
    .bottomQR{margin-top:12px;border:1px dashed #cbd5e1;background:#fff;border-radius:14px;padding:12px;text-align:center}
    .bottomQR .t{font-weight:900;font-size:15px;margin:0 0 8px}
    .bottomQR .s{font-size:13px;color:var(--muted);margin:0 0 10px;line-height:1.6}
    .bottomQR img{width:200px;height:200px}

    details{border-top:1px dashed #cbd5e1;margin-top:12px;padding-top:10px}
    summary{font-weight:900;cursor:pointer}

    .nonprofit{
      margin-top:14px;
      font-size:13px;
      color:var(--muted);
      line-height:1.7;
      text-align:center;
    }

    .foot{margin:12px 0 6px;font-size:12px;color:var(--muted);text-align:center}

    textarea, input{
      width:100%;
      border:1px solid var(--line);
      border-radius:12px;
      padding:12px;
      font-size:14px;
      line-height:1.5;
      outline:none;
      background:#fff;
    }
    input{border-radius:10px}
  </style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="title" id="appTitle">ì½©ì¼€ì–´</div>
    <div class="subtitle">
      íˆ¬ì„í™˜ìÂ·ì‹ ì¥ì´ì‹ ëŒ€ê¸°ìë¥¼ ìœ„í•œ<br>
      <b>ì—¬ìˆ˜ì‹œ ìš°ì„ </b> â€œìš”ì•½ + ì–´ë””ë¡œ + Direct ë§í¬â€
    </div>
    <div class="meta">
      ì ‘ê·¼ì„±: í° ê¸€ì”¨Â·ë‹¨ìˆœ ë²„íŠ¼Â·ê³ ë ¹/ì¤‘ì¦ì¥ì•  ì‚¬ìš©ì ê¸°ì¤€ Â· PWA(í™ˆí™”ë©´ ë°”ë¡œê°€ê¸°)
    </div>
  </div>

  <div class="guide">
    ğŸ”° <b>ì²˜ìŒì´ë©´</b> <b>â‘  ì¥ì• ì¸ë“±ë¡ â†’ â‘¥ êµí†µì§€ì› â†’ â‘¨ ê¸´ê¸‰ë³µì§€</b> ìˆœì„œë¡œ ë³´ì„¸ìš”.<br>
    â€œê¸ˆì „í‘œì‹œâ€ê°€ ìˆëŠ” í•­ëª©ì´ í˜œíƒ ê·œëª¨ê°€ í½ë‹ˆë‹¤.
  </div>

  <!-- ì„¤ì¹˜/ê³µìœ  ì•ˆë‚´ -->
  <div id="installBox" class="installBanner" aria-live="polite">
    <button class="close" onclick="hideInstallBox()" aria-label="ì„¤ì¹˜ ì•ˆë‚´ ë‹«ê¸°">X</button>
    <p class="t">ğŸ“² ì½©ì¼€ì–´ë¥¼ â€œë°”íƒ•í™”ë©´ ì•±â€ìœ¼ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”</p>
    <p class="d">
      ì•ˆë“œë¡œì´ë“œ: â‹® â†’ <b>í™ˆ í™”ë©´ì— ì¶”ê°€</b><br>
      ì•„ì´í°: ê³µìœ  â†’ <b>í™ˆ í™”ë©´ì— ì¶”ê°€</b>
    </p>
    <div class="btnRow">
      <button class="btn" onclick="openInstallShare()">í™ˆí™”ë©´ ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ </button>
      <button class="btn2" onclick="location.href='/?install=1&v='+Date.now()">ì„¤ì¹˜ ì•ˆë‚´ ëª¨ë“œë¡œ ë‹¤ì‹œ ì—´ê¸°</button>
    </div>
    <div class="mini">â€» Xë¡œ ë‹«ìœ¼ë©´ í•˜ë£¨ ë™ì•ˆ ìˆ¨ê¹€ë©ë‹ˆë‹¤.</div>
  </div>

  <!-- =======================
       â‘ ~â‘¨ (ì›ë³¸ ê·¸ëŒ€ë¡œ í¬í•¨)
       ======================= -->

  <!-- â‘  -->
  <div class="card">
    <div class="pillRow"><h2>â‘  ì¥ì• ì¸ ë“±ë¡(ì‹ ì¥ì¥ì• )</h2><span class="badge">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span></div>
    <div class="chips"><span class="chip">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span></div>
    <div class="sum">ìš”ì•½: ë³µì§€ í˜œíƒì˜ ì¶œë°œì (ê°ë©´Â·ì—°ê¸ˆÂ·ë°”ìš°ì²˜ ì—°ê³„)</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ(í–‰ì •ë³µì§€ì„¼í„°) ë³µì§€íŒ€ / ë³‘ì›(ì¥ì• ì§„ë‹¨ì„œ)</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì—°ê¸ˆÂ·ê°ë©´Â·ë°”ìš°ì²˜ ì—°ê³„(í•­ëª©ë³„ ìƒì´)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.mohw.go.kr/menu.es?mid=a10710010900" target="_blank" rel="noopener">ë“±ë¡ ì ˆì°¨Â·ì¥ì• ì •ë„ì‹¬ì‚¬(ë³µì§€ë¶€)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000117" target="_blank" rel="noopener">ì¥ì• ì¸ ë“±ë¡ ì‹ ì²­(ì •ë¶€24)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000273" target="_blank" rel="noopener">ì¥ì• ì¸ì¦ëª…ì„œ ë°œê¸‰(ì •ë¶€24)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">
      â€» ì •ë¶€Â·ì§€ìì²´ ê³µì‹ ìë£Œ ê¸°ë°˜. ì •ì±… ë³€ê²½ ì‹œ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.<br>
      â€» ìµœì¢… ì ìš© ì—¬ë¶€Â·ì¡°ê±´ì€ ê´€í•  ê¸°ê´€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
    </div>
  </div>

  <!-- â‘¡ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¡ ì‹ ì¥ì´ì‹ ì‹ ì²­/ëŒ€ê¸°ì ë“±ë¡</h2><span class="badge">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span></div>
    <div class="chips"><span class="chip">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span></div>
    <div class="sum">ìš”ì•½: ëŒ€ê¸°ë“±ë¡ì€ ë³‘ì› ì´ì‹ì„¼í„°ì—ì„œ ì§„í–‰(ë¹ ë¥¼ìˆ˜ë¡ ìœ ë¦¬)</div>
    <div class="where">ì–´ë””ë¡œ: ì´ì‹ ì˜ˆì • ë³‘ì› ì¥ê¸°ì´ì‹ì„¼í„°(ëŒ€í•™ë³‘ì› ë“±)</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ê²€ì‚¬/ì ˆì°¨ ë¹„ìš©ì€ ê°œì¸Â·ë³´í—˜Â·ì§€ì›ì— ë”°ë¼ ìƒì´(ë³‘ì› í™•ì¸)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.konos.go.kr/page/subPage.do?page=sub1_1_2_6" target="_blank" rel="noopener">ëŒ€ê¸°ì ë“±ë¡Â·ì„ ì • ê¸°ì¤€(KONOS)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.konos.go.kr/page/subPage.do?page=sub1_1_2_1" target="_blank" rel="noopener">ì´ì‹ ì ˆì°¨ ì•ˆë‚´(KONOS)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ë³‘ì›/ê¸°ê´€ í™•ì¸.</div>
  </div>

  <!-- â‘¢ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¢ ì‚°ì •íŠ¹ë¡€(ë³¸ì¸ë¶€ë‹´ ê²½ê°)</h2><span class="badge">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="chips"><span class="chip">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="sum">ìš”ì•½: ì ìš© ì‹œ ë³¸ì¸ë¶€ë‹´ ê²½ê°(ê°œì¸ë³„ ì ìš© í™•ì¸ í•„ìš”)</div>
    <div class="where">ì–´ë””ë¡œ: ë³‘ì› ì›ë¬´ê³¼ / êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ì§€ì‚¬</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ê²½ê°ë¥ ì€ ì§ˆí™˜Â·ë“±ë¡ì— ë”°ë¼ ë‹¤ë¦„</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.nhis.or.kr/nhis/policy/wbhada01600m01.do" target="_blank" rel="noopener">ì‚°ì •íŠ¹ë¡€ ì•ˆë‚´(ê±´ë³´)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ë³‘ì›/ê³µë‹¨ í™•ì¸.</div>
  </div>

  <!-- â‘£ -->
  <div class="card">
    <div class="pillRow"><h2>â‘£ ì—¬ìˆ˜Â·ì „ë‚¨ íˆ¬ì„ ì˜ë£Œë¹„</h2><span class="badge">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="chips"><span class="chip">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span><span class="chip">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="sum">ìš”ì•½: (ì¡°ê±´ ì¶©ì¡± ì‹œ) ë³¸ì¸ë¶€ë‹´ 50% ì§€ì›</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€</div>
    <div class="money"><b>ê¸ˆì „í‘œì‹œ:</b> ë³¸ì¸ë¶€ë‹´ 50%(ê·¼ê±° ë§í¬ í™•ì¸)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.yeosu.go.kr/www/govt/news/release/press?category_1=%EA%B4%80%EA%B4%91&idx=549721&mode=view&page=10" target="_blank" rel="noopener">ì—¬ìˆ˜ì‹œ ê³µì‹ìë£Œ(ê·¼ê±°)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.law.go.kr/LSW/ordinInfoP.do?ordinSeq=1399050" target="_blank" rel="noopener">ì „ë‚¨ ì¡°ë¡€(ê·¼ê±°)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ì£¼ë¯¼ì„¼í„° í™•ì¸.</div>
  </div>

  <!-- â‘¤ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¤ ì¥ì• ì—°ê¸ˆ/ì¥ì• ì¸ì—°ê¸ˆ</h2><span class="badge">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="chips"><span class="chip">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="sum">ìš”ì•½: ì¡°ê±´ ì¶©ì¡± ì‹œ ë§¤ì›” í˜„ê¸ˆì„± ì§€ì›</div>
    <div class="where">ì–´ë””ë¡œ: êµ­ë¯¼ì—°ê¸ˆê³µë‹¨ / ë™ì‚¬ë¬´ì†Œ</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì›” ì§€ê¸‰(ê°œì¸ë³„ ìƒì´, ë§¤ë…„ ë³€ë™)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.nps.or.kr/pnsinfo/ntpsklg/getOHAF0065M0.do" target="_blank" rel="noopener">ì¥ì• ì—°ê¸ˆ ì œë„ ì•ˆë‚´(NPS)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr/pension" target="_blank" rel="noopener">ì¥ì• ì¸ì—°ê¸ˆ(ë³µì§€ë¡œ)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ê³µë‹¨/ì£¼ë¯¼ì„¼í„° í™•ì¸.</div>
  </div>

  <!-- â‘¥ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¥ êµí†µ ë°”ìš°ì²˜(ì—¬ìˆ˜)</h2><span class="badge">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="chips"><span class="chip">â­ ì—¬ìˆ˜ì‹œ í•µì‹¬</span><span class="chip">ğŸ’° ê¸ˆì „ í˜œíƒ í¼</span></div>
    <div class="sum">ìš”ì•½: (2026.1.1 ê¸°ì¤€) ì›” 15íšŒ / ì›” 10ë§Œì›</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ / ì´ë™ì§€ì›ì„¼í„°</div>
    <div class="money"><b>ê¸ˆì „í‘œì‹œ:</b> ì›” 15íšŒ + ì›” 100,000ì›(ê³µì‹ í‘œ)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.doumcall.kr/guide/voucherinfo" target="_blank" rel="noopener">ë°”ìš°ì²˜ì½œíƒì‹œ ìš´í–‰ì •ë³´(ê³µì‹ í‘œ)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://m.yeosu.go.kr/www/govt/news/hotnews?idx=568746&mode=view" target="_blank" rel="noopener">ì„¬ì„¬ì—¬ìˆ˜ì½œ ì•ˆë‚´(ì—¬ìˆ˜ì‹œ)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ í‘œ ê¸°ì¤€. ë³€ë™ ê°€ëŠ¥(ìµœì¢… í™•ì¸ í•„ìš”).</div>
  </div>

  <!-- â‘¦ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¦ ê³µê³µìš”ê¸ˆÂ·í†µì‹  ê°ë©´</h2><span class="badge">ğŸ’° ìƒí™œë¹„ ì ˆê°</span></div>
    <div class="chips"><span class="chip">ğŸ’° ìƒí™œë¹„ ì ˆê°</span></div>
    <div class="sum">ìš”ì•½: ìƒí™œìš”ê¸ˆ ê°ë©´</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ + ê° ê¸°ê´€</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: í•­ëª©ë³„ ì›” ê°ë©´(ìƒì„¸ëŠ” ë§í¬ í™•ì¸)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.gov.kr/portal/service/serviceInfo/174100000049" target="_blank" rel="noopener">ìš”ê¸ˆê°ë©´ ì•ˆë‚´(ì •ë¶€24)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ê¸°ê´€ í™•ì¸.</div>
  </div>

  <!-- â‘§ -->
  <div class="card">
    <div class="pillRow"><h2>â‘§ êµí†µÂ·ë¬¸í™”Â·ì°¨ëŸ‰ í• ì¸(ì¥ì• ì¸ ê°ë©´)</h2><span class="badge">ğŸ’° ìƒí™œë¹„ ì ˆê°</span></div>
    <div class="chips"><span class="chip">ğŸ’° ìƒí™œë¹„ ì ˆê°</span></div>
    <div class="sum">ìš”ì•½: ì˜í™”/í†¨ê²Œì´íŠ¸/ì„ ë°•/í•­ê³µ/ì² ë„/ìë™ì°¨ ì„¸ì œí˜œíƒ ë“±</div>
    <div class="where">ì–´ë””ë¡œ: ê° ê¸°ê´€/ì‹œì„¤ + í•„ìš” ì‹œ ì£¼ë¯¼ì„¼í„°</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì˜ˆ) í†¨ê²Œì´íŠ¸ 50% ê°ë©´ ë“±(ê¸°ì¤€ì€ ë§í¬ í™•ì¸)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://easylaw.go.kr/CSP/CnpClsMain.laf?ccfNo=5&cciNo=1&cnpClsNo=2&csmSeq=916&popMenu=ov" target="_blank" rel="noopener">í†¨ê²Œì´íŠ¸ 50% ê°ë©´(ì‰¬ìš´ë²•ë ¹)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.mohw.go.kr/menu.es?mid=a10710010600" target="_blank" rel="noopener">ì¥ì• ì¸ ìë™ì°¨ ì„¸ì œí˜œíƒ(ë³µì§€ë¶€)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ê¸°ì¤€ í™•ì¸ í•„ìš”(ì§€ì—­/ê¸°ê´€ë³„ ìƒì´).</div>
  </div>

  <!-- â‘¨ -->
  <div class="card">
    <div class="pillRow"><h2>â‘¨ ê¸´ê¸‰ë³µì§€(ì˜ë£ŒÂ·ìƒê³„)</h2><span class="badge">ğŸš¨ ì§€ê¸ˆ í•„ìš”</span></div>
    <div class="chips"><span class="chip">ğŸš¨ ì§€ê¸ˆ í•„ìš”</span></div>
    <div class="sum">ìš”ì•½: ìœ„ê¸° ì‹œ ë‹¨ê¸° ì§€ì›</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì‚¬ë¡€ë³„ ì§€ì›(ê³µì‹ í™•ì¸)</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr/ssis-teu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003179" target="_blank" rel="noopener">ê¸´ê¸‰ë³µì§€ ì˜ë£Œì§€ì›(ë³µì§€ë¡œ)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003180" target="_blank" rel="noopener">ê¸´ê¸‰ë³µì§€ ìƒê³„ì§€ì›(ë³µì§€ë¡œ)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.129.go.kr/counsel/counsel01.do" target="_blank" rel="noopener">129 ìƒë‹´ì‹œê°„(ì¼ë°˜/ê¸´ê¸‰ êµ¬ë¶„)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
    <div class="trust">â€» ê³µì‹ ìë£Œ ê¸°ë°˜. ìµœì¢… ì ìš©ì€ ì£¼ë¯¼ì„¼í„° í™•ì¸.</div>
  </div>

  <!-- â‘© ì—…ë°ì´íŠ¸(ì£¼ê°„ ìë™ ë°˜ì˜) -->
  <div class="card" id="sec-10">
    <div class="pillRow">
      <h2>â‘© ì •ì±…Â·ë‰´ìŠ¤ ì—…ë°ì´íŠ¸</h2>
      <span class="badge">ì¼ìš”ì¼ 00:00</span>
    </div>
    <div class="sum">ìš”ì•½: ë³€ê²½ì´ ê°ì§€ë˜ë©´ â€œìµœê·¼ ë³€ê²½ 3ì¤„â€ë§Œ ë°˜ì˜í•©ë‹ˆë‹¤.</div>
    <div class="where">ìš´ì˜: ë§¤ì£¼ ì¼ìš”ì¼ 00:00(KST) ê°±ì‹  ê¸°ì¤€ (ì•± ì‹¤í–‰ ì‹œ ë°˜ì˜)</div>
    <div class="money"><b>ê¸ˆì „í‘œì‹œ:</b> ê³µì§€ì— ê¸ˆì•¡Â·í•œë„ê°€ ìˆìœ¼ë©´ ë°˜ë“œì‹œ í‘œê¸°</div>

    <details open>
      <summary>ìµœê·¼ ë³€ê²½(3ì¤„)</summary>
      <div class="tiny" id="changeLog">â€¢ ì•„ì§ ë³€ê²½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    </details>

    <div class="pillRow" style="margin-top:10px">
      <div class="tiny" id="lastUpdateText">ë§ˆì§€ë§‰ í‘œì‹œ: -</div>
      <span class="statusBadge status-warn" id="netBadge">ë„¤íŠ¸ì›Œí¬: í™•ì¸ ì¤‘â€¦</span>
    </div>

    <div class="newsList" id="newsList"></div>
    <div class="tiny" id="updateStatus"></div>
  </div>

  <!-- ê³µì‹ ì‹ ì²­ìš© ì•± ë‹¤ìš´ë¡œë“œ -->
  <div class="card">
    <div class="pillRow"><h2>ê³µì‹ ì‹ ì²­ìš© ì•± ë‹¤ìš´ë¡œë“œ</h2><span class="badge">ì•± ìˆëŠ” ê²ƒë§Œ</span></div>
    <div class="sum">ìš”ì•½: ì‹¤ì œ ì‹ ì²­Â·ì¡°íšŒëŠ” ê³µì‹ ì•±ì—ì„œ ì§„í–‰(ì½©ì¼€ì–´ëŠ” ì•ˆë‚´/ì •ë¦¬)</div>
    <div class="where">ìœ„ì¹˜: â‘©(ì •ì±…/ë‰´ìŠ¤) ì•„ë˜</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì•± ìì²´ ë¬´ë£Œ</div>
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://apps.apple.com/kr/app/%EC%A0%95%EB%B6%8024-%EA%B5%AC-%EB%AF%BC%EC%9B%9024/id586454505" target="_blank" rel="noopener">ì •ë¶€24 (iPhone)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://play.google.com/store/apps/details?hl=ko&id=kr.go.minwon.m" target="_blank" rel="noopener">ì •ë¶€24 (Android)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://apps.apple.com/kr/app/the%EA%B1%B4%EA%B0%95%EB%B3%B4%ED%97%98/id375279377" target="_blank" rel="noopener">Theê±´ê°•ë³´í—˜ (iPhone)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://play.google.com/store/apps/details?hl=ko&id=kr.or.nhic" target="_blank" rel="noopener">Theê±´ê°•ë³´í—˜ (Android)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://apps.apple.com/kr/app/%EB%82%B4-%EA%B3%81%EC%97%90-%EA%B5%AD%EB%AF%BC%EC%97%B0%EA%B8%88/id1321282064" target="_blank" rel="noopener">ë‚´ ê³ì— êµ­ë¯¼ì—°ê¸ˆ (iPhone)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://play.google.com/store/apps/details?hl=ko&id=kr.or.nps.smart" target="_blank" rel="noopener">ë‚´ ê³ì— êµ­ë¯¼ì—°ê¸ˆ (Android)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://apps.apple.com/kr/app/%EB%B3%B5%EC%A7%80%EB%A1%9C/id490534512" target="_blank" rel="noopener">ë³µì§€ë¡œ (iPhone)</a>
        <button class="qrBtn" onclick="toggleQR(this)">QR</button>
      </div><div class="qrBox"></div></div>
    </div>

    <details>
      <summary>ê°œì¸ì •ë³´Â·ë©´ì±…(í•„ìˆ˜ ê³ ì§€)</summary>
      <div class="tiny">
        â€¢ ì½©ì¼€ì–´ëŠ” íšŒì›ê°€ì…/ë¡œê·¸ì¸ ì—†ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
        â€¢ ê°œì¸ì •ë³´(ì´ë¦„/ì „í™”/ì£¼ë¯¼ë²ˆí˜¸/ìœ„ì¹˜ ë“±)ë¥¼ ìˆ˜ì§‘Â·ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
        â€¢ ë³¸ ì„œë¹„ìŠ¤ëŠ” ì•ˆë‚´ìš©ì´ë©°, ìµœì¢… ì ìš© ì—¬ë¶€Â·ê¸ˆì•¡Â·íšŸìˆ˜ëŠ” ê´€í•  ê¸°ê´€ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
      </div>
    </details>
  </div>

  <!-- í•˜ë‹¨ 3ì¢…ì„¸íŠ¸ -->
  <div class="bottomPack">
    <div class="bottomTitle">ğŸ“² ì½©ì¼€ì–´ ì•± ì„¤ì¹˜/ê³µìœ (ë°”íƒ•í™”ë©´ ë°”ë¡œê°€ê¸°)</div>
    <div class="bottomRow">
      <a class="bottomLink" href="https://kongcare.vercel.app/?install=1" target="_blank" rel="noopener">ì½©ì¼€ì–´ ì–´í”Œ ë§í¬ ì—´ê¸° (install=1)</a>
      <button class="bottomBtn" onclick="openInstallShare()">í™ˆí™”ë©´ ë°”ë¡œê°€ê¸° ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ </button>
    </div>
    <div class="bottomQR">
      <p class="t">QR ì°ê³  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</p>
      <p class="s">ì•„ë˜ QRì€ <b>install=1</b> ë§í¬ì…ë‹ˆë‹¤.</p>
      <img alt="ì½©ì¼€ì–´ ì„¤ì¹˜ QR" src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https%3A%2F%2Fkongcare.vercel.app%2F%3Finstall%3D1">
    </div>
  </div>

  <div class="nonprofit">
    ì½©ì¼€ì–´ëŠ” ê´‘ê³ Â·ê²°ì œÂ·ê°œì¸ì •ë³´ ìˆ˜ì§‘ì´ ì—†ëŠ”<br><b>ë¹„ì˜ë¦¬ ê³µìµ ì •ë³´ ì•ˆë‚´ ì„œë¹„ìŠ¤</b>ì…ë‹ˆë‹¤.
  </div>

  <div class="foot" id="footLine">â€» ìºì‹œ ë¬¸ì œ ì‹œ `?v=9999`ë¡œ ì ‘ì†í•˜ì„¸ìš”.</div>

  <!-- =======================
       ê´€ë¦¬ì íŒ¨ë„(ìˆ¨ê¹€) : ì œëª© 7íƒ­ + PIN
       ======================= -->
  <div class="card" id="adminPanel" style="display:none">
    <div class="pillRow">
      <h2>ê´€ë¦¬ì ëª¨ë“œ</h2>
      <span class="badge">ì—…ë°ì´íŠ¸ ìƒì„±</span>
    </div>

    <div class="sum">ìš”ì•½: ì—¬ê¸°ì„œ ë§Œë“  JSONì„ <b>/updates.json</b>ìœ¼ë¡œ ì˜¬ë¦¬ë©´, â€œì¼ìš”ì¼ 00:00 ê¸°ì¤€â€ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.</div>
    <div class="where">ì ‘ê·¼: ì œëª©(ì½©ì¼€ì–´) 7ë²ˆ íƒ­ â†’ PIN ì…ë ¥</div>

    <div style="border:1px dashed var(--line);border-radius:12px;padding:12px;margin:10px 0">
      <div style="font-weight:900;margin-bottom:8px">ë³€ê²½ë¡œê·¸(ìë™ 3ì¤„)</div>
      <div style="display:grid;gap:8px">
        <input id="chgInput" placeholder="ì˜ˆ: êµí†µ ë°”ìš°ì²˜ ê¸°ì¤€ ë¬¸êµ¬ ì—…ë°ì´íŠ¸"/>
        <button class="bottomBtn" onclick="addChangeLog()">ë³€ê²½ë¡œê·¸ ì¶”ê°€</button>
      </div>
    </div>

    <div style="border:1px dashed var(--line);border-radius:12px;padding:12px;margin:10px 0">
      <div style="font-weight:900;margin-bottom:8px">ë‰´ìŠ¤ ì¶”ê°€</div>
      <div style="display:grid;gap:8px">
        <input id="newsSource" placeholder="ì¶œì²˜ (ì˜ˆ: ì—¬ìˆ˜ì‹œ)"/>
        <input id="newsTitle" placeholder="ì œëª©"/>
        <input id="newsMoney" placeholder="ê¸ˆì „(ìˆìœ¼ë©´ ì…ë ¥)"/>
        <input id="newsUrl" placeholder="ë§í¬ URL(https://...)"/>
        <button class="bottomBtn" onclick="addNewsItem()">ë‰´ìŠ¤ ì¶”ê°€</button>
      </div>
      <div class="tiny">â€¢ ì¶œì²˜/ì œëª©/ë§í¬ëŠ” í•„ìˆ˜. ë‰´ìŠ¤ëŠ” 5~10ê°œ ìœ ì§€.</div>
    </div>

    <details>
      <summary>ê³ ê¸‰: JSON ì§ì ‘ í¸ì§‘(ì„ íƒ)</summary>
      <div class="tiny" style="margin-top:8px">â€¢ ì˜ ëª¨ë¥´ë©´ ê±´ë“œë¦¬ì§€ ë§ê³  ìœ„ ë²„íŠ¼ë§Œ ì“°ë©´ ë©ë‹ˆë‹¤.</div>
      <textarea id="adminJson" rows="16" style="margin-top:10px"></textarea>
    </details>

    <div style="display:grid;gap:10px;margin-top:12px">
      <button class="bottomBtn" onclick="adminApplySeed()">ì´ ê°’ìœ¼ë¡œ ì¦‰ì‹œ ì ìš©(ì´ ê¸°ê¸°)</button>
      <button class="bottomBtn" onclick="adminCopyJson()">JSON ë³µì‚¬</button>
      <button class="bottomBtn" onclick="adminDownloadUpdates()">updates.json ë‹¤ìš´ë¡œë“œ</button>
      <button class="bottomBtnDark" onclick="adminClose()">ê´€ë¦¬ì ë‹«ê¸°</button>
    </div>
  </div>
</div>

<!-- ë‚´ì¥ ì—…ë°ì´íŠ¸ ë°ì´í„°(seed) -->
<script type="application/json" id="updates-seed">
{
  "updatedAt": "2026-01-27T00:00:00+09:00",
  "changeLog": [
    "â€¢ (ì´ˆê¸°) ì£¼ê°„ ì—…ë°ì´íŠ¸(ì¼ìš”ì¼ 00:00) ê²Œì´íŠ¸ ì ìš©",
    "â€¢ (ì´ˆê¸°) ê´€ë¦¬ì ëª¨ë“œ(7íƒ­+PIN) + ë²„íŠ¼ í¸ì§‘ ì¶”ê°€",
    "â€¢ (ì´ˆê¸°) ë‰´ìŠ¤ 5~10ê°œ ìë™ í‘œì‹œ"
  ],
  "news": [
    { "date":"ìµœê·¼", "source":"ì—¬ìˆ˜ì‹œ", "title":"ë³´ë„ìë£Œ/ê³µì§€(ë³µì§€Â·ì§€ì›)", "money":"ê³µì§€ë§ˆë‹¤ ìƒì´(ìˆ˜ì¹˜ ìˆìœ¼ë©´ í‘œê¸°)", "url":"https://www.yeosu.go.kr/www/govt/news/release/press" },
    { "date":"ìµœê·¼", "source":"ì „ë‚¨ê´‘ì—­", "title":"ë°”ìš°ì²˜ì½œíƒì‹œ ìš´í–‰ì •ë³´", "money":"ì›” 15íšŒ/ì›” 10ë§Œì›(í‘œ ê¸°ì¤€)", "url":"https://www.doumcall.kr/guide/voucherinfo" },
    { "date":"ìµœê·¼", "source":"ì—¬ìˆ˜ì‹œ", "title":"ì„¬ì„¬ì—¬ìˆ˜ì½œ/ë¬´ë£Œì½œ ì•ˆë‚´", "money":"ê³µì§€ ê¸°ì¤€(ë³€ë™ ê°€ëŠ¥)", "url":"https://m.yeosu.go.kr/www/govt/news/hotnews?idx=568746&mode=view" },
    { "date":"ìµœê·¼", "source":"ê±´ë³´ê³µë‹¨", "title":"ì‚°ì •íŠ¹ë¡€ ì•ˆë‚´", "money":"ë³¸ì¸ë¶€ë‹´ ê²½ê°(ì§ˆí™˜/ë“±ë¡ë³„)", "url":"https://www.nhis.or.kr/nhis/policy/wbhada01600m01.do" },
    { "date":"ìµœê·¼", "source":"ë³µì§€ë¶€", "title":"ê³µê³µì‹œì„¤/ìš”ê¸ˆ ê°ë©´(ê³µì‹)", "money":"ê³µì˜ì£¼ì°¨/ì‹œì„¤ í• ì¸ ë“±", "url":"https://www.mohw.go.kr/menu.es?mid=a10710010500" }
  ]
}
</script>

<script>
  /* ========= ì„¤ì • ========= */
  const ADMIN_PIN = "6972";                 // í˜•ì´ ì›í•˜ëŠ” 4ìë¦¬ë¡œ ë³€ê²½
  const REMOTE_UPDATES_URL = "/updates.json";
  const TAP_COUNT = 7;
  const TAP_WINDOW_MS = 900;

  /* QR í† ê¸€ */
  function toggleQR(btn){
    const container = btn.closest('.linkItem') || btn.closest('.newsCard');
    const box = container.querySelector('.qrBox');
    const open = box.style.display === 'block';
    if(open){ box.style.display='none'; box.innerHTML=''; return; }
    const a = container.querySelector('a');
    const url = a ? a.href : location.href;
    const imgUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=170x170&data=' + encodeURIComponent(url);
    box.innerHTML = '<div class="qrHint">QRì„ ì°ìœ¼ë©´ ì´ ë§í¬ë¡œ ì´ë™í•©ë‹ˆë‹¤</div><img alt="QR" src="'+imgUrl+'">';
    box.style.display='block';
  }

  /* ì„¤ì¹˜/ê³µìœ  */
  let deferredPrompt = null;
  window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; });

  async function openInstallShare(){
    const url = "https://kongcare.vercel.app/?install=1";
    const msg = "ì½©ì¼€ì–´ ë§í¬ì…ë‹ˆë‹¤: " + url;

    if(deferredPrompt){
      deferredPrompt.prompt();
      try{ await deferredPrompt.userChoice; }catch(e){}
      deferredPrompt = null;
      alert("ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì¹´í†¡ìœ¼ë¡œ ë§í¬ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.");
      return;
    }
    if(navigator.share){
      try{ await navigator.share({title:"ì½©ì¼€ì–´", text:msg, url}); return; }catch(e){}
    }
    try{
      await navigator.clipboard.writeText(msg);
      alert("ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ì¹´í†¡ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
    }catch(e){
      prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ ì¹´í†¡ì— ë³´ë‚´ì„¸ìš”:", msg);
    }
  }

  /* ì„¤ì¹˜ ë°•ìŠ¤ ë‹«ê¸°(í•˜ë£¨ ìˆ¨ê¹€) */
  function hideInstallBox(){
    const until = Date.now() + 24*60*60*1000;
    localStorage.setItem("kongcare_hide_installbox_until", String(until));
    document.getElementById("installBox").style.display = "none";
  }
  (function(){
    const until = Number(localStorage.getItem("kongcare_hide_installbox_until") || "0");
    if(Date.now() < until){
      document.getElementById("installBox").style.display = "none";
    }
  })();

  /* ë„¤íŠ¸ì›Œí¬ ë°°ì§€ */
  function updateNetBadge(){
    const badge = document.getElementById("netBadge");
    if(!badge) return;
    const on = navigator.onLine;
    badge.textContent = on ? "ë„¤íŠ¸ì›Œí¬: ì˜¨ë¼ì¸" : "ë„¤íŠ¸ì›Œí¬: ì˜¤í”„ë¼ì¸";
    badge.className = "statusBadge " + (on ? "status-ok" : "status-bad");
  }
  window.addEventListener("online", updateNetBadge);
  window.addEventListener("offline", updateNetBadge);
  updateNetBadge();

  /* â‘© ë Œë” */
  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, (m)=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
  }
  function setChangeLog(lines){
    const el = document.getElementById("changeLog");
    if(!el) return;
    const safe = (lines || []).slice(0,3);
    el.innerHTML = safe.length ? safe.map(x=>escapeHtml(x)).join("<br>") : "â€¢ ì•„ì§ ë³€ê²½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.";
  }
  function renderLastUpdate(ts){
    const el = document.getElementById("lastUpdateText");
    if(!el) return;
    const t = ts ? new Date(ts) : new Date();
    el.textContent = "ë§ˆì§€ë§‰ í‘œì‹œ: " + t.toLocaleString();
  }
  function setUpdateStatus(msg, level){
    const el = document.getElementById("updateStatus");
    if(!el) return;
    el.textContent = msg;
    el.style.color = (level === "bad") ? "var(--bad)" : (level === "ok" ? "var(--good)" : "var(--muted)");
  }
  function renderNews(items){
    const list = document.getElementById("newsList");
    if(!list) return;

    const arr = Array.isArray(items) ? items : [];
    const ensured = arr.slice(0, 10);
    const count = Math.min(10, Math.max(5, ensured.length || 5));
    const show = ensured.slice(0, count);

    list.innerHTML = show.map(n => `
      <div class="newsCard">
        <div class="newsHead">
          <div style="flex:1">
            <p class="newsTitle">[${escapeHtml(n.source || "")}] ${escapeHtml(n.title || "")}</p>
            <div class="newsMeta">${escapeHtml(n.date || "ìµœê·¼")}</div>
            <div class="newsMoney"><b>ê¸ˆì „: ${escapeHtml(n.money || "í•´ë‹¹ ì—†ìŒ")}</b></div>
          </div>
          <button class="qrBtn" onclick="toggleQR(this)">QR</button>
        </div>
        <div class="qrBox"></div>
        <div class="newsActions">
          <a class="newsBtn" href="${n.url}" target="_blank" rel="noopener">ìì„¸íˆ ë³´ê¸°</a>
          <button class="newsBtn" onclick="copyLink('${encodeURIComponent(n.url)}')">ë§í¬ ë³µì‚¬</button>
        </div>
      </div>
    `).join("");
  }
  async function copyLink(encUrl){
    const url = decodeURIComponent(encUrl);
    try{
      await navigator.clipboard.writeText(url);
      alert("ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.");
    }catch(e){
      prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:", url);
    }
  }

  /* ì—…ë°ì´íŠ¸ ë°ì´í„° */
  function readSeedUpdates(){
    try{
      const ov = localStorage.getItem("kongcare_seed_override");
      if(ov) return JSON.parse(ov);
      const el = document.getElementById("updates-seed");
      if(!el) return null;
      return JSON.parse(el.textContent.trim());
    }catch(e){
      return null;
    }
  }

  function normalizeUpdates(obj){
    const out = (obj && typeof obj === "object") ? obj : {};
    out.updatedAt = out.updatedAt || new Date().toISOString();
    out.changeLog = Array.isArray(out.changeLog) ? out.changeLog.slice(0,3) : [];
    out.news = Array.isArray(out.news) ? out.news.slice(0,10) : [];
    if(out.news.length < 5){
      const seed = document.getElementById("updates-seed") ? JSON.parse(document.getElementById("updates-seed").textContent.trim()) : null;
      const seedNews = seed && Array.isArray(seed.news) ? seed.news : [];
      out.news = out.news.concat(seedNews).slice(0, Math.max(5, out.news.length));
      out.news = out.news.slice(0,10);
    }
    return out;
  }

  function applyUpdates(data, sourceLabel){
    const seed = readSeedUpdates();
    const use = normalizeUpdates(data || seed || {});
    setChangeLog(use.changeLog || []);
    renderNews(use.news || []);
    renderLastUpdate(use.updatedAt || new Date().toISOString());

    const prevHash = localStorage.getItem("kongcare_updates_hash");
    const nextHash = (JSON.stringify(use).length + ":" + String(use.updatedAt));
    localStorage.setItem("kongcare_updates_hash", nextHash);

    if(prevHash && prevHash !== nextHash){
      setUpdateStatus("ì—…ë°ì´íŠ¸ ë°˜ì˜ ì™„ë£Œ(ë³€ê²½ ê°ì§€) Â· ì¶œì²˜: " + sourceLabel, "ok");
    }else{
      setUpdateStatus("ì—…ë°ì´íŠ¸ í™•ì¸ ì™„ë£Œ(ë³€ê²½ ì—†ìŒ) Â· ì¶œì²˜: " + sourceLabel, "warn");
    }
  }

  function getLastSundayMidnightLocal(now){
    const d = new Date(now);
    const day = d.getDay(); // 0=ì¼
    d.setHours(0,0,0,0);
    d.setDate(d.getDate() - day);
    return d;
  }

  function shouldRunWeeklyUpdate(){
    const now = new Date();
    const lastRun = Number(localStorage.getItem("kongcare_last_weekly_run") || "0");
    const lastSunday = getLastSundayMidnightLocal(now).getTime();
    return lastRun < lastSunday;
  }

  function markWeeklyRun(){
    localStorage.setItem("kongcare_last_weekly_run", String(Date.now()));
  }

  async function tryFetchRemoteUpdates(){
    try{
      const res = await fetch(REMOTE_UPDATES_URL + "?v=" + Date.now(), {cache:"no-store"});
      if(!res.ok) throw new Error("http " + res.status);
      return await res.json();
    }catch(e){
      return null;
    }
  }

  async function weeklyUpdateFlow(){
    // ì¦‰ì‹œ í‘œì‹œ: seed
    applyUpdates(null, "ë‚´ì¥(seed)");

    // ì£¼ê°„ ê²Œì´íŠ¸ í†µê³¼ ì‹œì—ë§Œ ì›ê²© ì—…ë°ì´íŠ¸ ì‹œë„
    if(!shouldRunWeeklyUpdate()) return;

    if(!navigator.onLine){
      setUpdateStatus("ì˜¤í”„ë¼ì¸ì…ë‹ˆë‹¤. ì˜¨ë¼ì¸ì´ ë˜ë©´ ë‹¤ìŒ ì‹¤í–‰ ì‹œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.", "bad");
      return;
    }

    const remote = await tryFetchRemoteUpdates();
    if(remote){
      applyUpdates(remote, "ì›ê²©(/updates.json)");
      markWeeklyRun();
    }else{
      setUpdateStatus("ì›ê²© ì—…ë°ì´íŠ¸(/updates.json)ê°€ ì—†ì–´ ë‚´ì¥(seed)ìœ¼ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.", "warn");
    }
  }

  /* ê´€ë¦¬ì ëª¨ë“œ: ì œëª© 7íƒ­ + PIN */
  (function adminInit(){
    const titleEl = document.getElementById("appTitle");
    if(!titleEl) return;

    let taps = 0;
    let timer = null;

    titleEl.addEventListener("click", ()=>{
      taps++;
      if(timer) clearTimeout(timer);
      timer = setTimeout(()=>{ taps = 0; }, TAP_WINDOW_MS);

      if(taps >= TAP_COUNT){
        taps = 0;
        adminOpen();
      }
    });
  })();

  function adminOpen(){
    const pin = prompt("ê´€ë¦¬ì PIN 4ìë¦¬ ì…ë ¥");
    if(pin !== ADMIN_PIN){
      alert("PINì´ í‹€ë¦½ë‹ˆë‹¤.");
      return;
    }
    const panel = document.getElementById("adminPanel");
    const ta = document.getElementById("adminJson");
    if(!panel || !ta) return;

    const seed = normalizeUpdates(readSeedUpdates() || {});
    ta.value = JSON.stringify(seed, null, 2);
    panel.style.display = "block";
    panel.scrollIntoView({behavior:"smooth", block:"start"});
  }

  function adminClose(){
    const panel = document.getElementById("adminPanel");
    if(panel) panel.style.display = "none";
  }

  function adminGetJson(){
    const ta = document.getElementById("adminJson");
    if(!ta) throw new Error("JSON í¸ì§‘ì°½ì´ ì—†ìŠµë‹ˆë‹¤.");
    return normalizeUpdates(JSON.parse(ta.value));
  }

  function adminSyncJson(obj){
    const ta = document.getElementById("adminJson");
    if(!ta) return;
    obj.updatedAt = new Date().toISOString();
    ta.value = JSON.stringify(normalizeUpdates(obj), null, 2);
  }

  function adminApplySeed(){
    try{
      const data = adminGetJson();
      localStorage.setItem("kongcare_seed_override", JSON.stringify(data));
      applyUpdates(data, "ê´€ë¦¬ì(ì´ ê¸°ê¸° ì ìš©)");
      alert("ì ìš© ì™„ë£Œ!\n\nì „ ì‚¬ìš©ì ë°˜ì˜ì„ ì›í•˜ë©´ â€˜updates.json ë‹¤ìš´ë¡œë“œâ€™ í›„ ì„œë²„ ë£¨íŠ¸(/updates.json)ì— ì—…ë¡œë“œí•˜ì„¸ìš”.");
    }catch(e){
      alert("JSON ì˜¤ë¥˜: " + e.message);
    }
  }

  function adminCopyJson(){
    try{
      const data = adminGetJson();
      const text = JSON.stringify(data, null, 2);
      navigator.clipboard.writeText(text).then(()=>{
        alert("JSONì„ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. updates.jsonìœ¼ë¡œ ì €ì¥í•´ ì—…ë¡œë“œí•˜ë©´ ë©ë‹ˆë‹¤.");
      }).catch(()=>{
        prompt("ì•„ë˜ JSONì„ ë³µì‚¬í•˜ì„¸ìš”:", text);
      });
    }catch(e){
      alert("JSON ì˜¤ë¥˜: " + e.message);
    }
  }

  function adminDownloadUpdates(){
    try{
      const data = adminGetJson();
      const text = JSON.stringify(data, null, 2);
      const blob = new Blob([text], {type:"application/json;charset=utf-8"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "updates.json";
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1200);
      alert("updates.json ë‹¤ìš´ë¡œë“œ ì™„ë£Œ!\nì„œë²„ ë£¨íŠ¸(/updates.json)ì— ì˜¬ë¦¬ë©´ â€˜ì¼ìš”ì¼ 00:00 ê¸°ì¤€â€™ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.");
    }catch(e){
      alert("JSON ì˜¤ë¥˜: " + e.message);
    }
  }

  /* ê´€ë¦¬ì ë²„íŠ¼í™” */
  function getAdminSeed(){
    try{
      const ta = document.getElementById("adminJson");
      return normalizeUpdates(JSON.parse(ta.value));
    }catch(e){
      return normalizeUpdates(readSeedUpdates() || {});
    }
  }

  function addChangeLog(){
    const input = document.getElementById("chgInput");
    const text = (input && input.value ? input.value : "").trim();
    if(!text){ alert("ë³€ê²½ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."); return; }

    const data = getAdminSeed();
    data.changeLog = Array.isArray(data.changeLog) ? data.changeLog : [];
    data.changeLog.unshift("â€¢ " + text);
    data.changeLog = data.changeLog.slice(0,3);
    data.updatedAt = new Date().toISOString();

    adminSyncJson(data);
    applyUpdates(data, "ê´€ë¦¬ì(ë³€ê²½ë¡œê·¸ ë²„íŠ¼)");
    input.value = "";
  }

  function addNewsItem(){
    const s = (document.getElementById("newsSource").value || "").trim();
    const t = (document.getElementById("newsTitle").value || "").trim();
    const m = (document.getElementById("newsMoney").value || "").trim();
    const u = (document.getElementById("newsUrl").value || "").trim();

    if(!s || !t || !u){
      alert("ì¶œì²˜/ì œëª©/ë§í¬ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
      return;
    }
    if(!/^https?:\/\//i.test(u)){
      alert("ë§í¬ëŠ” https:// ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.");
      return;
    }

    const data = getAdminSeed();
    data.news = Array.isArray(data.news) ? data.news : [];
    data.news.unshift({ date:"ìµœê·¼", source:s, title:t, money:(m||"í•´ë‹¹ ì—†ìŒ"), url:u });
    data.news = data.news.slice(0,10);
    data.updatedAt = new Date().toISOString();

    adminSyncJson(data);
    applyUpdates(data, "ê´€ë¦¬ì(ë‰´ìŠ¤ ë²„íŠ¼)");

    document.getElementById("newsSource").value="";
    document.getElementById("newsTitle").value="";
    document.getElementById("newsMoney").value="";
    document.getElementById("newsUrl").value="";
  }

  /* ì‹œì‘ */
  weeklyUpdateFlow();
</script>
</body>
</html
