<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ì½©ì¼€ì–´</title>

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">

  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#64748b;
      --line:#e2e8f0; --blue:#2563eb; --soft:#eef2ff;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:560px;margin:0 auto;padding:18px}
    .top{text-align:center;margin:8px 0 14px}
    .title{font-size:30px;font-weight:900;margin:0}
    .subtitle{margin:8px 0 0;font-size:15px;color:#555;line-height:1.6}
    .meta{margin-top:10px;font-size:12px;color:var(--muted);line-height:1.5}

    .banner{
      display:none;background:var(--soft);border:1px dashed var(--blue);
      border-radius:14px;padding:12px;font-size:13px;line-height:1.55;margin:12px 0 14px;text-align:left
    }
    .banner b{font-weight:900}

    .card{
      background:var(--card);border-radius:18px;padding:16px;margin:14px 0;
      box-shadow:0 6px 16px rgba(0,0,0,.06);border:1px solid #f1f5f9;
    }
    .pillRow{display:flex;justify-content:space-between;gap:10px;align-items:center;margin:0 0 8px}
    .card h2{margin:0;font-size:20px;font-weight:900;letter-spacing:-0.2px}
    .badge{
      display:inline-block;font-size:12px;font-weight:900;background:var(--soft);
      border:1px solid #e0e7ff;color:#3730a3;border-radius:999px;padding:6px 10px;white-space:nowrap;
    }
    .sum{margin:0 0 8px;font-size:15px;font-weight:900;line-height:1.55}
    .where,.money{margin:0 0 8px;font-size:13px;line-height:1.55}
    .where{color:var(--muted)}
    .money b{font-weight:900}

    .linkRow{display:grid;gap:10px;margin-top:10px}
    .linkItem{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .linkTop{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px}
    .linkA{flex:1;text-decoration:none;color:var(--text);font-weight:900;font-size:15px;line-height:1.35}
    .qrBtn{border:1px solid #cbd5e1;background:#f8fafc;border-radius:12px;padding:10px 12px;font-weight:900;cursor:pointer}
    .qrBox{display:none;border-top:1px dashed #cbd5e1;padding:12px;text-align:center;background:#fff}
    .qrBox img{width:160px;height:160px}
    .qrHint{font-size:12px;color:var(--muted);margin-bottom:8px}
    .tiny{font-size:12px;color:var(--muted);line-height:1.5;margin-top:8px}

    /* â‘© ë‰´ìŠ¤ ëª©ë¡ */
    .newsList{display:grid;gap:10px;margin-top:10px}
    .newsCard{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .newsHead{padding:12px;display:flex;gap:10px;justify-content:space-between;align-items:flex-start}
    .newsTitle{font-weight:900;font-size:15px;line-height:1.35;margin:0}
    .newsMeta{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.4}
    .newsMoney{font-size:12px;margin-top:6px;line-height:1.4}
    .newsMoney b{font-weight:900}
    .newsActions{padding:0 12px 12px;display:flex;gap:10px}
    .newsBtn{
      flex:1;border:1px solid var(--line);background:#fff;border-radius:12px;
      padding:10px;font-weight:900;cursor:pointer;text-align:center;text-decoration:none;color:var(--text)
    }

    /* âœ… í•˜ë‹¨ 3ì¢…ì„¸íŠ¸(ì ˆëŒ€ ê³ ì • ê¸ˆì§€) */
    .bottomPack{
      background:#fff;border:1px solid var(--line);
      border-radius:18px;padding:14px;box-shadow:0 6px 16px rgba(0,0,0,.06);
      margin-top:18px;
    }
    .bottomTitle{font-weight:900;font-size:15px;margin:0 0 10px 0}
    .bottomRow{display:grid;gap:10px}
    .bottomLink{
      display:block;text-align:center;padding:14px;border-radius:14px;
      border:1px solid var(--line);background:#fff;text-decoration:none;color:var(--text);
      font-weight:900;font-size:16px
    }
    .bottomBtn{
      width:100%;border:0;background:var(--blue);color:#fff;border-radius:14px;
      padding:14px;font-weight:900;font-size:16px;cursor:pointer
    }
    .bottomQR{margin-top:12px;border:1px dashed #cbd5e1;background:#fff;border-radius:14px;padding:12px;text-align:center}
    .bottomQR .t{font-weight:900;font-size:14px;margin:0 0 8px}
    .bottomQR .s{font-size:12px;color:var(--muted);margin:0 0 10px;line-height:1.5}
    .bottomQR img{width:190px;height:190px}
    .foot{font-size:12px;color:var(--muted);text-align:center;line-height:1.5;margin:16px 0 0}
  </style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="title">ì½©ì¼€ì–´</div>
    <div class="subtitle">
      íˆ¬ì„í™˜ìÂ·ì‹ ì¥ì´ì‹ ëŒ€ê¸°ìë¥¼ ìœ„í•œ<br>
      <b>ì—¬ìˆ˜ì‹œ ìš°ì„ </b> â€œìš”ì•½ + ì–´ë””ë¡œ + Direct ë§í¬â€
    </div>
    <div class="meta" id="metaLine"></div>
  </div>

  <div id="installBanner" class="banner">
    <b>ğŸ“² í™ˆí™”ë©´ì— ì¶”ê°€í•˜ë©´ ì•±ì²˜ëŸ¼ ì‚¬ìš©ë©ë‹ˆë‹¤</b><br>
    ì•ˆë“œë¡œì´ë“œ: â‹® â†’ í™ˆ í™”ë©´ì— ì¶”ê°€<br>
    ì•„ì´í°: ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€<br>
    (ë§¨ ì•„ë˜ â€˜í™ˆí™”ë©´ ì„¤ì¹˜/ì¹´í†¡ ê³µìœ â€™ ë²„íŠ¼ë„ ì‚¬ìš© ê°€ëŠ¥)
  </div>

  <div id="cards"></div>

  <!-- âœ… â‘©ê³¼ í•˜ë‹¨ ì‚¬ì´: ê³µì‹ ì•± ë‹¤ìš´ë¡œë“œ ì•ˆë‚´(ì•±ì´ ì‹¤ì œ ìˆëŠ” ê²ƒë§Œ) -->
  <div class="card" id="appDownloads">
    <div class="pillRow">
      <h2>ê³µì‹ ì‹ ì²­ìš© ì•± ë‹¤ìš´ë¡œë“œ</h2>
      <span class="badge">ì•± ìˆëŠ” ê²ƒë§Œ</span>
    </div>
    <div class="sum">ìš”ì•½: ì‹¤ì œ ì‹ ì²­Â·ì¡°íšŒëŠ” ê³µì‹ ì•±ì—ì„œ ì§„í–‰(ì½©ì¼€ì–´ëŠ” ì•ˆë‚´/ì •ë¦¬)</div>
    <div class="where">ìœ„ì¹˜: â‘©(ì •ì±…/ë‰´ìŠ¤) ì•„ë˜ â€” ê°€ì¥ í—·ê°ˆë¦¬ì§€ ì•ŠëŠ” ìœ„ì¹˜</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì•± ìì²´ëŠ” ë¬´ë£Œ. ì§€ì›ê¸ˆ/ê°ë©´ ìˆ˜ì¹˜ëŠ” ê° ì œë„ ì•ˆë‚´ì—ì„œ í™•ì¸</div>
    <div class="linkRow" id="appDownloadLinks"></div>
    <div class="tiny">â€» ì•ˆë“œë¡œì´ë“œ(Play) / ì•„ì´í°(App Store) ëª¨ë‘ ê°€ëŠ¥í•œ ì•±ë§Œ í‘œì‹œí•©ë‹ˆë‹¤.</div>
  </div>

  <!-- âœ… ë§¨ ì•„ë˜ ë¬´ì¡°ê±´ 3ì¢…ì„¸íŠ¸(ê³ ì • ê¸ˆì§€) -->
  <div class="bottomPack">
    <div class="bottomTitle">ğŸ“² ì½©ì¼€ì–´ ì•± ì„¤ì¹˜/ê³µìœ (ë°”íƒ•í™”ë©´ ë°”ë¡œê°€ê¸°)</div>
    <div class="bottomRow">
      <a class="bottomLink" href="https://kongcare.vercel.app/?install=1" target="_blank" rel="noopener">
        ì½©ì¼€ì–´ ì–´í”Œ ë§í¬ ì—´ê¸° (install=1)
      </a>
      <button class="bottomBtn" onclick="openInstallShare()">
        í™ˆí™”ë©´ ë°”ë¡œê°€ê¸° ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ 
      </button>
    </div>

    <div class="bottomQR">
      <p class="t">QR ì°ê³  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</p>
      <p class="s">ì•„ë˜ QRì€ <b>install=1</b> ë§í¬ì…ë‹ˆë‹¤. (ì„¤ì¹˜ ì•ˆë‚´ ìë™ í‘œì‹œ)</p>
      <img alt="ì½©ì¼€ì–´ ì„¤ì¹˜ QR"
           src="https://api.qrserver.com/v1/create-qr-code/?size=190x190&data=https%3A%2F%2Fkongcare.vercel.app%2F%3Finstall%3D1">
      <p class="s" style="margin-top:10px">QR ì´ë¯¸ì§€ëŠ” ì¹´í†¡ìœ¼ë¡œ ì €ì¥/ê³µìœ í•´ë„ ë©ë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="foot" id="footLine"></div>
</div>

<script>
/* =========================
   â‘ ~â‘© ë°ì´í„°
   - â‘§ ì¶”ê°€: êµí†µ/ë¬¸í™”/ì°¨ëŸ‰ í• ì¸ í˜œíƒ (ì˜í™”/í†¨ê²Œì´íŠ¸/ì„ ë°•/í•­ê³µ/ê¸°ì°¨/ìë™ì°¨)
   - â‘¨ ê¸´ê¸‰ë³µì§€
   - â‘© ì •ì±…/ë‰´ìŠ¤(ìµœëŒ€ 10ê°œ, 5~10ê°œ ê°€ë³€)
   ========================= */
const DATA = [
  {
    no:"â‘ ", title:"ì¥ì• ì¸ ë“±ë¡(ì‹ ì¥ì¥ì• )",
    sum:"ìš”ì•½: ë³µì§€ í˜œíƒì˜ ì¶œë°œì (ê°ë©´Â·ì—°ê¸ˆÂ·ë°”ìš°ì²˜ ì—°ê³„)",
    where:"ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ(í–‰ì •ë³µì§€ì„¼í„°) ë³µì§€íŒ€ / ë³‘ì›(ì¥ì• ì§„ë‹¨ì„œ)",
    money:"ê¸ˆì „í‘œì‹œ: ì—°ê¸ˆÂ·ê°ë©´Â·ë°”ìš°ì²˜ â€˜ì—°ê³„ ìê²©â€™ ìƒì„±(í•­ëª©ë³„ ìƒì´)",
    links:[
      {label:"ë“±ë¡ ì ˆì°¨Â·ì¥ì• ì •ë„ì‹¬ì‚¬(ë³µì§€ë¶€)", url:"https://www.mohw.go.kr/menu.es?mid=a10710010900"},
      {label:"ì¥ì• ì¸ ë“±ë¡ ì‹ ì²­(ì •ë¶€24)", url:"https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000117"},
      {label:"ì¥ì• ì¸ì¦ëª…ì„œ ë°œê¸‰(ì •ë¶€24)", url:"https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000273"}
    ]
  },
  {
    no:"â‘¡", title:"ì‹ ì¥ì´ì‹ ì‹ ì²­/ëŒ€ê¸°ì ë“±ë¡",
    sum:"ìš”ì•½: ëŒ€ê¸°ë“±ë¡ì€ ë³‘ì› ì´ì‹ì„¼í„°ì—ì„œ ì§„í–‰(ë¹ ë¥¼ìˆ˜ë¡ ìœ ë¦¬)",
    where:"ì–´ë””ë¡œ: ì´ì‹ ì˜ˆì • ë³‘ì› ì¥ê¸°ì´ì‹ì„¼í„°(ëŒ€í•™ë³‘ì› ë“±)",
    money:"ê¸ˆì „í‘œì‹œ: ê²€ì‚¬/ì ˆì°¨ ë¹„ìš©ì€ ê°œì¸Â·ë³´í—˜Â·ì§€ì›ì— ë”°ë¼ ìƒì´(ë³‘ì› ì•ˆë‚´ í™•ì¸)",
    links:[
      {label:"ëŒ€ê¸°ì ë“±ë¡Â·ì„ ì • ê¸°ì¤€(KONOS)", url:"https://www.konos.go.kr/page/subPage.do?page=sub1_1_2_6"},
      {label:"ì´ì‹ ì ˆì°¨ ì•ˆë‚´(KONOS)", url:"https://www.konos.go.kr/page/subPage.do?page=sub1_1_2_1"}
    ]
  },
  {
    no:"â‘¢", title:"ì‚°ì •íŠ¹ë¡€(ë³¸ì¸ë¶€ë‹´ ê²½ê°)",
    sum:"ìš”ì•½: ì ìš© ì‹œ ë³¸ì¸ë¶€ë‹´ ê²½ê°(ê°œì¸ë³„ ì ìš© í™•ì¸ í•„ìš”)",
    where:"ì–´ë””ë¡œ: ë³‘ì› ì›ë¬´ê³¼ / êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ì§€ì‚¬",
    money:"ê¸ˆì „í‘œì‹œ: ë³¸ì¸ë¶€ë‹´ ê²½ê°(ì§ˆí™˜/ë“±ë¡ì— ë”°ë¼ ë‹¤ë¦„)",
    links:[
      {label:"ì‚°ì •íŠ¹ë¡€ ì•ˆë‚´(ê±´ë³´)", url:"https://www.nhis.or.kr/nhis/policy/wbhada01600m01.do"},
      {label:"ì ìš© ëŒ€ìƒÂ·ê¸°ì¤€(ê±´ë³´)", url:"https://www.nhis.or.kr/nhis/policy/wbhada01700m01.do"}
    ]
  },
  {
    no:"â‘£", title:"ì—¬ìˆ˜Â·ì „ë‚¨ íˆ¬ì„ ì˜ë£Œë¹„ ì§€ì›",
    sum:"ìš”ì•½: (ì¡°ê±´ ì¶©ì¡± ì‹œ) íˆ¬ì„ë¹„ ë³¸ì¸ë¶€ë‹´ì•¡ 50% ì§€ì›",
    where:"ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€(ì‹ ì²­) / ì§€ì¹¨Â·ì˜ˆì‚° í™•ì¸",
    money:"ê¸ˆì „í‘œì‹œ(ê·¼ê±°): ë³¸ì¸ë¶€ë‹´ 50%(ì„¸ë¶€ ì¡°ê±´ì€ ê³µì‹ ê³µì§€/ì¡°ë¡€ í™•ì¸)",
    links:[
      {label:"ì—¬ìˆ˜ì‹œ ê³µì‹ìë£Œ(ì§€ì› ì•ˆë‚´)", url:"https://www.yeosu.go.kr/www/govt/news/release/press?category_1=%EA%B4%80%EA%B4%91&idx=549721&mode=view&page=10"},
      {label:"ì „ë‚¨ ì¡°ë¡€(ê·¼ê±°)", url:"https://www.law.go.kr/LSW/ordinInfoP.do?ordinSeq=1399050"}
    ]
  },
  {
    no:"â‘¤", title:"ì¥ì• ì—°ê¸ˆ/ì¥ì• ì¸ì—°ê¸ˆ",
    sum:"ìš”ì•½: ì¡°ê±´ ì¶©ì¡± ì‹œ ë§¤ì›” í˜„ê¸ˆì„± ì§€ì›(ì¢…ë¥˜/ìš”ê±´ ìƒì´)",
    where:"ì–´ë””ë¡œ: êµ­ë¯¼ì—°ê¸ˆê³µë‹¨(ì¥ì• ì—°ê¸ˆ) / ë™ì‚¬ë¬´ì†Œ(ì¥ì• ì¸ì—°ê¸ˆ)",
    money:"ê¸ˆì „í‘œì‹œ: ì›” ì§€ê¸‰(ê°œì¸ë³„ ì‚°ì •/ë§¤ë…„ ë³€ë™) â€” ì•ˆë‚´ í˜ì´ì§€ í™•ì¸",
    links:[
      {label:"ì¥ì• ì—°ê¸ˆ ì œë„ ì•ˆë‚´(NPS)", url:"https://www.nps.or.kr/pnsinfo/ntpsklg/getOHAF0065M0.do"},
      {label:"ì¥ì• ì—°ê¸ˆ ì²­êµ¬/ì‹ ì²­(ì •ë¶€24)", url:"https://www.gov.kr/mw/AA020InfoCappView.do?CappBizCD=14600000301"},
      {label:"ì¥ì• ì¸ì—°ê¸ˆ(ë³µì§€ë¡œ)", url:"https://www.bokjiro.go.kr/pension"}
    ]
  },
  {
    no:"â‘¥", title:"êµí†µ ë°”ìš°ì²˜(ì—¬ìˆ˜)",
    sum:"ìš”ì•½: (2026.1.1 ê¸°ì¤€) ì›” 15íšŒ / ì›” 100,000ì›",
    where:"ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€ / ì „ë‚¨ê´‘ì—­ ì´ë™ì§€ì›ì„¼í„° ë“±ë¡",
    money:"ê¸ˆì „í‘œì‹œ(ê·¼ê±°): ì›” 15íšŒ + ì›” 100,000ì›(ê³µì‹ í‘œ ê¸°ì¤€, ë³€ë™ ê°€ëŠ¥)",
    links:[
      {label:"ë°”ìš°ì²˜ì½œíƒì‹œ ìš´í–‰ì •ë³´(ê³µì‹ í‘œ)", url:"https://www.doumcall.kr/guide/voucherinfo"},
      {label:"ì„¬ì„¬ì—¬ìˆ˜ ë¬´ë£Œì½œ/ë°”ìš°ì²˜ ì•ˆë‚´(ì—¬ìˆ˜ì‹œ)", url:"https://m.yeosu.go.kr/www/govt/news/hotnews?idx=568746&mode=view"}
    ]
  },
  {
    no:"â‘¦", title:"ê³µê³µìš”ê¸ˆÂ·í†µì‹  ê°ë©´",
    sum:"ìš”ì•½: (ì¡°ê±´ ì¶©ì¡± ì‹œ) ìƒí™œìš”ê¸ˆ ê°ë©´",
    where:"ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€ + ê° ê¸°ê´€(ì „ê¸°/ê°€ìŠ¤/í†µì‹ ì‚¬)",
    money:"ê¸ˆì „í‘œì‹œ: í•­ëª©ë³„ ì›” ê°ë©´(ê¸°ê´€ë³„ ìƒì´) â€” ì•ˆë‚´ í˜ì´ì§€ í™•ì¸",
    links:[
      {label:"ìš”ê¸ˆê°ë©´ ì•ˆë‚´(ì •ë¶€24)", url:"https://www.gov.kr/portal/service/serviceInfo/174100000049"},
      {label:"í†µì‹ ìš”ê¸ˆ ê°ë©´(ë³µì§€ë¡œ)", url:"https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003257"}
    ]
  },
  {
    no:"â‘§", title:"êµí†µÂ·ë¬¸í™”Â·ì°¨ëŸ‰ í• ì¸(ì¥ì• ì¸ ê°ë©´)",
    sum:"ìš”ì•½: ì˜í™”/ê³µê³µì‹œì„¤/í†¨ê²Œì´íŠ¸/ì„ ë°•/í•­ê³µ/ì² ë„/ìë™ì°¨ ì„¸ì œí˜œíƒ ë“± í• ì¸",
    where:"ì–´ë””ë¡œ: ì‹œì„¤/ê¸°ê´€(í˜„ì¥) + í•„ìš”í•œ ê²½ìš° ì£¼ë¯¼ì„¼í„°(ë“±ë¡/ì¹´ë“œ/í•˜ì´íŒ¨ìŠ¤ ë“±ë¡)",
    money:"ê¸ˆì „í‘œì‹œ: (ì˜ˆ) í†¨ê²Œì´íŠ¸ 50% ê°ë©´, ì² ë„ ê³µê³µí• ì¸, ê³µê³µì‹œì„¤ ë¬´ë£Œ/50%, ì°¨ëŸ‰ ì„¸ì œí˜œíƒ(ê°œë³„ì†Œë¹„ì„¸ 500ë§Œì› í•œë„ ë“±) â€” ê¸°ì¤€ì€ ë§í¬ í™•ì¸",
    links:[
      {label:"ì² ë„(ì½”ë ˆì¼) ì¥ì• ì¸ ê³µê³µí• ì¸ ì•ˆë‚´", url:"https://www.korail.com/ticket/discountSystem/discount"},
      {label:"í†¨ê²Œì´íŠ¸ ê°ë©´ í•˜ì´íŒ¨ìŠ¤(í†µí•©ë³µì§€ì¹´ë“œ) ì•ˆë‚´", url:"https://www.hipass.co.kr/info/guide/05_use_guide_reduction.do"},
      {label:"ê³ ì†ë„ë¡œ í†µí–‰ë£Œ 50% ê°ë©´(ì‰¬ìš´ë²•ë ¹)", url:"https://easylaw.go.kr/CSP/CnpClsMain.laf?ccfNo=5&cciNo=1&cnpClsNo=2&csmSeq=916&popMenu=ov"},
      {label:"ì¥ì• ì¸ ìë™ì°¨ ì„¸ì œí˜œíƒ(ë³µì§€ë¶€)", url:"https://www.mohw.go.kr/menu.es?mid=a10710010600"},
      {label:"ê³µê³µì‹œì„¤ ìš”ê¸ˆê°ë©´(ë³µì§€ë¶€: ê³µì˜ì£¼ì°¨/ê³µì—°ì¥/ì²´ìœ¡ì‹œì„¤)", url:"https://www.mohw.go.kr/menu.es?mid=a10710010500"},
      {label:"í•­ê³µÂ·ì—¬ê°ì„ Â·ì² ë„ í• ì¸(ì§€ìì²´ ì•ˆë‚´ ì˜ˆì‹œ)", url:"https://www.guro.go.kr/www/contents.do?key=2302"},
      {label:"ëŒ€í•œí•­ê³µ êµ­ë‚´ì„  ì¥ì• ì¸ í• ì¸ ì•ˆë‚´(ê³µì‹)", url:"https://www.koreanair.com/contents/booking/reservation-guide/fares/domestic"}
    ]
  },
  {
    no:"â‘¨", title:"ê¸´ê¸‰ë³µì§€(ì˜ë£ŒÂ·ìƒê³„)",
    sum:"ìš”ì•½: ìœ„ê¸° ìƒí™© ì‹œ ì˜ë£Œ/ìƒê³„ ë‹¨ê¸° ì§€ì›(ì‚¬ë¡€ë³„ ì‚°ì •)",
    where:"ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€(ì ‘ìˆ˜/ìƒë‹´) + ê³µì‹ ì•ˆë‚´ í™•ì¸",
    money:"ê¸ˆì „í‘œì‹œ: ì‚¬ë¡€ë³„(ì˜ë£Œ/ìƒê³„) â€” ê³µì‹ ì•ˆë‚´ì— ìˆ˜ì¹˜ê°€ ìˆìœ¼ë©´ ê·¸ ê¸°ì¤€ ì ìš©",
    links:[
      {label:"ê¸´ê¸‰ë³µì§€ ì˜ë£Œì§€ì›(ë³µì§€ë¡œ)", url:"https://www.bokjiro.go.kr/ssis-teu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003179"},
      {label:"ê¸´ê¸‰ë³µì§€ ìƒê³„ì§€ì›(ë³µì§€ë¡œ)", url:"https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003180"},
      {label:"129 ìƒë‹´ì‹œê°„(ì¼ë°˜/ê¸´ê¸‰ êµ¬ë¶„)", url:"https://www.129.go.kr/counsel/counsel01.do"}
    ]
  }
];

/* â‘© ì •ì±…/ë‰´ìŠ¤: 5~10ê°œ ì‚¬ì´ ìë™ ë°°ì¹˜ */
const NEWS_ITEMS = [
  {date:"ìµœê·¼", source:"ì—¬ìˆ˜ì‹œ", title:"ë³µì§€/ì§€ì› ë³´ë„ìë£Œ ëª¨ìŒ", money:"ê¸ˆì „: ê³µì§€ë§ˆë‹¤ ìƒì´(ìˆ˜ì¹˜ ìˆìœ¼ë©´ í‘œê¸°)", url:"https://www.yeosu.go.kr/www/govt/news/release/press"},
  {date:"ìµœê·¼", source:"ì „ë‚¨(ê´‘ì—­)", title:"ë°”ìš°ì²˜ì½œíƒì‹œ ìš´í–‰ì •ë³´(ê¸°ì¤€ í™•ì¸)", money:"ê¸ˆì „: ì›” 15íšŒ/ì›” 10ë§Œì›(í‘œ ê¸°ì¤€)", url:"https://www.doumcall.kr/guide/voucherinfo"},
  {date:"ìµœê·¼", source:"ì—¬ìˆ˜ì‹œ", title:"ì„¬ì„¬ì—¬ìˆ˜ì½œ/ë¬´ë£Œì½œ ê´€ë ¨ ì•ˆë‚´", money:"ê¸ˆì „: ê³µì§€ ê¸°ì¤€(ë³€ë™ ê°€ëŠ¥)", url:"https://m.yeosu.go.kr/www/govt/news/hotnews?idx=568746&mode=view"},
  {date:"ìµœê·¼", source:"ì „ë‚¨ë„ì²­", title:"ë³µì§€/ê³µì§€(ì „ë‚¨)", money:"ê¸ˆì „: ê³µì§€ë§ˆë‹¤ ìƒì´", url:"https://www.jeonnam.go.kr"},
  {date:"ìµœê·¼", source:"ë³µì§€ë¶€", title:"ì¥ì• ì¸ ê³µê³µìš”ê¸ˆÂ·ì‹œì„¤ ê°ë©´(ê³µì‹)", money:"ê¸ˆì „: ê³µê³µì‹œì„¤ ë¬´ë£Œ/50%, ê³µì˜ì£¼ì°¨ ê°ë©´ ë“±", url:"https://www.mohw.go.kr/menu.es?mid=a10710010500"},
  {date:"ìµœê·¼", source:"ê±´ë³´ê³µë‹¨", title:"ì‚°ì •íŠ¹ë¡€ ì•ˆë‚´(ê³µì‹)", money:"ê¸ˆì „: ë³¸ì¸ë¶€ë‹´ ê²½ê°(ì§ˆí™˜/ë“±ë¡ë³„)", url:"https://www.nhis.or.kr/nhis/policy/wbhada01600m01.do"}
  // í•„ìš” ì‹œ 10ê°œê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥
];

/* ê³µì‹ ì•± ë‹¤ìš´ë¡œë“œ(ì–‘ í”Œë«í¼ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ê²ƒë§Œ) */
const APP_DOWNLOADS = [
  { name:"ì •ë¶€24", ios:"https://apps.apple.com/kr/app/%EC%A0%95%EB%B6%8024-%EA%B5%AC-%EB%AF%BC%EC%9B%9024/id586454505", and:"https://play.google.com/store/apps/details?hl=ko&id=kr.go.minwon.m" },
  { name:"Theê±´ê°•ë³´í—˜(ê±´ë³´ê³µë‹¨)", ios:"https://apps.apple.com/kr/app/the%EA%B1%B4%EA%B0%95%EB%B3%B4%ED%97%98/id375279377", and:"https://play.google.com/store/apps/details?hl=ko&id=kr.or.nhic" },
  { name:"ë‚´ ê³ì— êµ­ë¯¼ì—°ê¸ˆ", ios:"https://apps.apple.com/kr/app/%EB%82%B4-%EA%B3%81%EC%97%90-%EA%B5%AD%EB%AF%BC%EC%97%B0%EA%B8%88/id1321282064", and:"https://play.google.com/store/apps/details?hl=ko&id=kr.or.nps.smart" },
  { name:"ë³µì§€ë¡œ", ios:"https://apps.apple.com/kr/app/%EB%B3%B5%EC%A7%80%EB%A1%9C/id490534512", and:"https://play.google.com/store/apps/details?hl=ko&id=app.kr.go.bokjiro" },
  { name:"ì„¬ì„¬ì—¬ìˆ˜ì½œ", ios:"https://apps.apple.com/kr/app/%EC%84%AC%EC%84%AC%EC%97%AC%EC%88%98%EC%BD%9C/id6756790837", and:"https://play.google.com/store/apps/details?id=com.anyall.cust.yeosu" }
];

function makeLinkItem(label, url){
  const safeUrl = String(url);
  const escaped = safeUrl.replace(/'/g, "%27");
  return `
    <div class="linkItem">
      <div class="linkTop">
        <a class="linkA" href="${safeUrl}" target="_blank" rel="noopener">${label}</a>
        <button class="qrBtn" onclick="toggleQR(this,'${escaped}')">QR</button>
      </div>
      <div class="qrBox"></div>
    </div>
  `;
}

function render(){
  document.getElementById("metaLine").textContent =
    "ê¸°ì¤€: ì—¬ìˆ˜ì‹œ ìš°ì„  Â· ë§í¬ë³„ QR Â· â‘© ë‰´ìŠ¤ 5~10ê°œ ê°€ë³€ Â· í•˜ë‹¨(ì•±ë§í¬/ì„¤ì¹˜/ê³µìœ /QR) í•­ìƒ í¬í•¨ Â· ê³ ì • UI ì—†ìŒ";

  const cards = document.getElementById("cards");
  // â‘ ~â‘¨ ë Œë”
  cards.innerHTML = DATA.map(it => `
    <div class="card" id="sec-${it.no}">
      <div class="pillRow">
        <h2>${it.no} ${it.title}</h2>
      </div>
      <div class="sum">${it.sum}</div>
      <div class="where">${it.where}</div>
      <div class="money">${it.money}</div>
      <div class="linkRow">
        ${it.links.map(l => makeLinkItem(l.label, l.url)).join("")}
      </div>
    </div>
  `).join("");

  // â‘© ë‰´ìŠ¤ ì¹´ë“œ ì¶”ê°€
  const newsCount = Math.min(10, Math.max(5, NEWS_ITEMS.length)); // 5~10 ë²”ìœ„
  const sliced = NEWS_ITEMS.slice(0, newsCount);

  const newsHtml = `
    <div class="card" id="sec-â‘©">
      <div class="pillRow">
        <h2>â‘© ì •ì±…Â·ë‰´ìŠ¤ ì—…ë°ì´íŠ¸</h2>
        <span class="badge">5~10ê°œ</span>
      </div>
      <div class="sum">ìš”ì•½: ì—¬ìˆ˜ì‹œ â†’ ì „ë‚¨ â†’ ì „êµ­ ìˆœìœ¼ë¡œ ë³€ê²½ ì†Œì‹ì„ ëª¨ì•„ ë°˜ì˜</div>
      <div class="where">ìš´ì˜: 3ì¼ ê°„ê²© / 03:00(KST) ìë™ ìƒˆë¡œê³ ì¹¨ + ë‚´ìš© ë³€ê²½ ê°ì§€ ìë™ ë°˜ì˜</div>
      <div class="money"><b>ê¸ˆì „í‘œì‹œ:</b> ê³µì§€ì— ê¸ˆì•¡Â·í•œë„ê°€ ìˆìœ¼ë©´ ë°˜ë“œì‹œ í‘œê¸°</div>

      <div class="newsList">
        ${sliced.map((n, idx) => `
          <div class="newsCard">
            <div class="newsHead">
              <div style="flex:1">
                <p class="newsTitle">[${n.source}] ${n.title}</p>
                <div class="newsMeta">${n.date}</div>
                <div class="newsMoney"><b>${n.money}</b></div>
              </div>
              <button class="qrBtn" onclick="toggleQR(this,'${String(n.url).replace(/'/g,"%27")}')">QR</button>
            </div>
            <div class="qrBox"></div>
            <div class="newsActions">
              <a class="newsBtn" href="${n.url}" target="_blank" rel="noopener">ìì„¸íˆ ë³´ê¸°</a>
            </div>
          </div>
        `).join("")}
      </div>

      <div class="tiny" id="updateStatus"></div>
      <div class="tiny">â€» í•„ìš” ì‹œ 10ê°œê¹Œì§€ ëŠ˜ë¦½ë‹ˆë‹¤(ìë™). ë¶ˆí•„ìš”í•˜ë©´ 5~10 ì‚¬ì´ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.</div>
    </div>
  `;
  cards.insertAdjacentHTML("beforeend", newsHtml);

  // ì•± ë‹¤ìš´ë¡œë“œ ë§í¬ ë Œë”
  const appBox = document.getElementById("appDownloadLinks");
  appBox.innerHTML = APP_DOWNLOADS.flatMap(app => ([
    makeLinkItem(`ì•± ì„¤ì¹˜: ${app.name} (iPhone)`, app.ios),
    makeLinkItem(`ì•± ì„¤ì¹˜: ${app.name} (Android)`, app.and)
  ])).join("");

  document.getElementById("footLine").innerHTML =
    "â€» ìˆ˜ì¹˜ í‘œê¸°ëŠ” ê³µì‹ ê·¼ê±°ê°€ ìˆëŠ” ê²½ìš°ë§Œ í‘œê¸°í–ˆìŠµë‹ˆë‹¤. ê¸°ì¤€ì€ ë³€ê²½ë  ìˆ˜ ìˆìœ¼ë‹ˆ ìµœì¢… í™•ì¸ í•„ìš”.";
}
render();

/* ë§í¬ QR í† ê¸€ */
function toggleQR(btn, url){
  // ë‰´ìŠ¤ ì¹´ë“œ/ë§í¬ ì¹´ë“œ ë‘˜ ë‹¤ ëŒ€ì‘: ë°”ë¡œ ì•„ë˜ì— ìˆëŠ” qrBoxë¥¼ ì°¾ìŒ
  const card = btn.closest('.linkItem') || btn.closest('.newsCard');
  const box = card.querySelector('.qrBox');
  const open = box.style.display === 'block';
  if(open){ box.style.display='none'; box.innerHTML=''; return; }
  const imgUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=' + encodeURIComponent(url);
  box.innerHTML = '<div class="qrHint">QRì„ ì°ìœ¼ë©´ ì´ ë§í¬ë¡œ ë°”ë¡œ ì´ë™í•©ë‹ˆë‹¤</div><img alt="QR" src="'+imgUrl+'">';
  box.style.display='block';
}

/* install=1 ë°°ë„ˆ */
(function(){
  const p = new URLSearchParams(location.search);
  if(p.has("install")){
    const b = document.getElementById("installBanner");
    if(b) b.style.display = "block";
  }
})();

/* ì„¤ì¹˜/ê³µìœ  */
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; });

async function openInstallShare(){
  const url = "https://kongcare.vercel.app/?install=1";
  const msg = "ì½©ì¼€ì–´ ë§í¬ì…ë‹ˆë‹¤: " + url;

  if(deferredPrompt){
    deferredPrompt.prompt();
    try{ await deferredPrompt.userChoice; }catch(e){}
    deferredPrompt = null;
    alert("ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì¹´í†¡ìœ¼ë¡œ ë§í¬ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.");
    return;
  }
  if(navigator.share){
    try{ await navigator.share({title:"ì½©ì¼€ì–´", text:msg, url}); return; }catch(e){}
  }
  try{
    await navigator.clipboard.writeText(msg);
    alert("ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ì¹´í†¡ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
  }catch(e){
    prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ ì¹´í†¡ì— ë³´ë‚´ì„¸ìš”:", msg);
  }
}

/* ìë™ ì—…ë°ì´íŠ¸ 1) ë‚´ìš© ë³€ê²½ ê°ì§€ */
function djb2(str){
  let h = 5381;
  for(let i=0;i<str.length;i++) h = ((h<<5)+h) + str.charCodeAt(i);
  return (h >>> 0).toString(16);
}
async function autoRefreshIfChanged(){
  try{
    const res = await fetch(location.pathname, {cache:'no-store'});
    const txt = await res.text();
    const hash = djb2(txt);
    const key = "kongcare_last_hash";
    const prev = localStorage.getItem(key);
    if(prev && prev !== hash){
      location.href = "/?v=" + Date.now();
      return;
    }
    localStorage.setItem(key, hash);
  }catch(e){}
}
autoRefreshIfChanged();

/* ìë™ ì—…ë°ì´íŠ¸ 2) 3ì¼/03ì‹œ(KST) */
function nextRunKST(){
  const now = new Date();
  const kst = new Date(now.getTime() + (9*60 + now.getTimezoneOffset())*60*1000);
  const base = new Date(kst); base.setHours(3,0,0,0);
  let next = base;
  if(kst >= base) next = new Date(base.getTime() + 3*24*60*60*1000);
  const nextLocal = new Date(next.getTime() - (9*60 + now.getTimezoneOffset())*60*1000);
  return {kstNext:next, localNext:nextLocal};
}
(function scheduleAutoUpdate(){
  const {kstNext, localNext} = nextRunKST();
  const ms = Math.max(10_000, localNext.getTime() - Date.now());
  const st = document.getElementById("updateStatus");
  if(st){
    st.textContent = `ì—…ë°ì´íŠ¸ ìë™ ì²´í¬: 3ì¼ ê°„ê²© / 03:00(KST). ë‹¤ìŒ ì²´í¬: ${kstNext.toISOString().replace('T',' ').slice(0,16)} (KST)`;
  }
  setTimeout(()=>{ location.href = "/?v=" + Date.now(); }, ms);
})();
</script>
</body>
</html>
