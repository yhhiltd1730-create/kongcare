<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ì½©ì¼€ì–´</title>

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">

  <style>
    :root{
      --bg:#f5f7fb; --card:#fff; --text:#0f172a; --muted:#64748b;
      --line:#e2e8f0; --blue:#2563eb;
    }
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:520px;margin:0 auto;padding:20px}
    h1{font-size:28px;margin:10px 0 6px 0;text-align:center}
    .sub{font-size:15px;color:#555;text-align:center;margin-bottom:18px;line-height:1.6}

    .banner{
      display:none;background:#eef2ff;border:1px dashed var(--blue);color:var(--text);
      padding:12px;border-radius:14px;margin:12px 0 18px;font-size:13px;line-height:1.55
    }
    .banner b{font-weight:900}

    .card{background:var(--card);border-radius:18px;padding:18px;margin-bottom:16px;box-shadow:0 6px 16px rgba(0,0,0,.06)}
    .card h2{font-size:20px;margin:0 0 8px 0}
    .sum{font-size:15px;font-weight:900;margin:0 0 8px 0;line-height:1.55}
    .where{font-size:13px;color:var(--muted);margin:0 0 8px 0;line-height:1.55}
    .money{font-size:13px;margin:0 0 10px 0;line-height:1.55}
    .money b{font-weight:900}

    .linkRow{display:grid;gap:10px;margin-top:8px}
    .linkItem{border:1px solid var(--line);border-radius:14px;background:#fff;overflow:hidden}
    .linkTop{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px}
    .linkA{flex:1;text-decoration:none;color:var(--text);font-weight:900;font-size:15px;line-height:1.35}
    .qrBtn{
      border:1px solid #cbd5e1;background:#f8fafc;border-radius:12px;
      padding:10px 12px;font-weight:900;cursor:pointer
    }
    .qrBox{display:none;border-top:1px dashed #cbd5e1;padding:12px;text-align:center}
    .qrBox img{width:160px;height:160px}
    .qrHint{font-size:12px;color:var(--muted);margin-bottom:8px}

    .hint{font-size:12px;color:var(--muted);line-height:1.5;margin:16px 0;text-align:center}

    .titleRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .badge{display:inline-block;font-size:12px;font-weight:900;background:#eef2ff;border:1px solid #e0e7ff;color:#3730a3;border-radius:999px;padding:6px 10px}
    .tiny{font-size:12px;color:var(--muted);line-height:1.5;margin-top:8px}

    /* âœ… í•˜ë‹¨ 3ì¢…ì„¸íŠ¸: ê³ ì • ê¸ˆì§€, ë§¨ ì•„ë˜ ì¹´ë“œë¡œë§Œ */
    .bottomPack{
      background:#ffffff;border:1px solid var(--line);padding:14px;border-radius:18px;
      box-shadow:0 6px 16px rgba(0,0,0,.06);margin-top:10px;
    }
    .bottomTitle{font-weight:900;font-size:15px;margin:0 0 10px 0}
    .bottomRow{display:grid;gap:10px}
    .bottomLink{
      display:block;text-align:center;padding:14px;border-radius:14px;
      border:1px solid var(--line);background:#fff;text-decoration:none;
      color:var(--text);font-weight:900;font-size:16px
    }
    .bottomBtn{
      width:100%;border:0;background:var(--blue);color:#fff;border-radius:14px;
      padding:14px;font-weight:900;font-size:16px;cursor:pointer
    }
    .bottomQR{
      margin-top:12px;border:1px dashed #cbd5e1;background:#fff;border-radius:14px;
      padding:12px;text-align:center;
    }
    .bottomQR .t{font-weight:900;font-size:14px;margin:0 0 8px}
    .bottomQR .s{font-size:12px;color:var(--muted);margin:0 0 10px;line-height:1.5}
    .bottomQR img{width:190px;height:190px}
    .foot{font-size:12px;color:var(--muted);text-align:center;line-height:1.5;margin:16px 0 0}
  </style>
</head>

<body>
<div class="wrap">
  <h1>ì½©ì¼€ì–´</h1>
  <div class="sub">
    íˆ¬ì„í™˜ìÂ·ì‹ ì¥ì´ì‹ ëŒ€ê¸°ìë¥¼ ìœ„í•œ<br>
    <b>ì—¬ìˆ˜ì‹œ ìš°ì„ </b> â€œìš”ì•½ + ì–´ë””ë¡œ + Direct ë§í¬â€
  </div>

  <div id="installBanner" class="banner">
    <b>ğŸ“² í™ˆí™”ë©´ì— ì¶”ê°€í•˜ë©´ ì•±ì²˜ëŸ¼ ì‚¬ìš©ë©ë‹ˆë‹¤</b><br>
    ì•ˆë“œë¡œì´ë“œ: â‹® â†’ í™ˆ í™”ë©´ì— ì¶”ê°€ / ì•„ì´í°: ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€<br>
    (ë§¨ ì•„ë˜ â€˜í™ˆí™”ë©´ ì„¤ì¹˜/ì¹´í†¡ ê³µìœ â€™ ë²„íŠ¼ë„ ì‚¬ìš© ê°€ëŠ¥)
  </div>

  <!-- (ì¤‘ê°„ â‘ ~â‘¦ì€ í˜•ì´ ì“°ë˜ ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤ê³  ê°€ì • / í•„ìš” ì‹œ ì—¬ê¸°ë¡œ ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥) -->
  <!-- ì—¬ê¸°ì„œëŠ” â‘§,â‘¨ ë¶„ë¦¬ ìš”êµ¬ ë°˜ì˜ì„ ìœ„í•´ â‘§,â‘¨ë§Œ ì˜ˆì‹œ í¬í•¨ -->
  <!-- ì‹¤ì œ ì ìš© ì‹œ: ê¸°ì¡´ â‘ ~â‘¦ ì¹´ë“œ ë¸”ë¡ì„ ì´ ìœ„ì¹˜ì— ê·¸ëŒ€ë¡œ ë‘ë©´ ë¨ -->

  <!-- â‘§ ê¸´ê¸‰ë³µì§€(ì˜ë£ŒÂ·ìƒê³„) -->
  <div class="card" id="sec8">
    <h2>â‘§ ê¸´ê¸‰ë³µì§€(ì˜ë£ŒÂ·ìƒê³„)</h2>
    <div class="sum">ìš”ì•½: ìœ„ê¸° ìƒí™© ì‹œ ì˜ë£Œ/ìƒê³„ ë‹¨ê¸° ì§€ì›(ì‚¬ë¡€ë³„ ì‚°ì •)</div>
    <div class="where">ì–´ë””ë¡œ: ë™ì‚¬ë¬´ì†Œ ë³µì§€íŒ€(ì ‘ìˆ˜/ìƒë‹´) + ê³µì‹ ì•ˆë‚´ í™•ì¸</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ì‚¬ë¡€ë³„(ì˜ë£Œ/ìƒê³„) â€” ê³µì‹ ì•ˆë‚´ì— ìˆ˜ì¹˜ê°€ ìˆìœ¼ë©´ ê·¸ ê¸°ì¤€ ì ìš©</div>

    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr/ssis-teu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003179" target="_blank" rel="noopener">ê¸´ê¸‰ë³µì§€ ì˜ë£Œì§€ì›(ë³µì§€ë¡œ)</a>
        <button class="qrBtn" onclick="toggleQR(this,'https://www.bokjiro.go.kr/ssis-teu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003179')">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003180" target="_blank" rel="noopener">ê¸´ê¸‰ë³µì§€ ìƒê³„ì§€ì›(ë³µì§€ë¡œ)</a>
        <button class="qrBtn" onclick="toggleQR(this,'https://www.bokjiro.go.kr/ssis-tbu/twataa/wlfareInfo/moveTWAT52011M.do?wlfareInfoId=WLF00003180')">QR</button>
      </div><div class="qrBox"></div></div>
    </div>
  </div>

  <!-- â‘¨ ì •ì±…/ë‰´ìŠ¤ ì—…ë°ì´íŠ¸(ë¶„ë¦¬) -->
  <div class="card" id="updates">
    <div class="titleRow">
      <h2 style="margin:0">â‘¨ ì¤‘ì¦ì¥ì• ì¸ ì •ì±…Â·ë‰´ìŠ¤ ì—…ë°ì´íŠ¸</h2>
      <span class="badge">3ì¼/03ì‹œ</span>
    </div>
    <div class="sum">ìš”ì•½: ì—¬ìˆ˜ì‹œ â†’ ì „ë‚¨ â†’ ì „êµ­ ìˆœìœ¼ë¡œ ë³€ê²½ ì†Œì‹ì„ ëª¨ì•„ ë°˜ì˜</div>
    <div class="where">ìš´ì˜: 3ì¼ ê°„ê²© / 03:00(KST) ìë™ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ìµœì‹  ë°˜ì˜</div>
    <div class="money">ê¸ˆì „í‘œì‹œ: ìƒˆ ì •ì±…/ê³µì§€ì— ê¸ˆì•¡Â·í•œë„ê°€ ìˆìœ¼ë©´ ë°˜ë“œì‹œ í‘œê¸°</div>

    <!-- ì´ˆê¸° ê¸°ë³¸ ì†ŒìŠ¤(ì˜ˆì‹œ): ì—¬ìˆ˜/ì „ë‚¨/129 ë“± â€œì¶œì²˜â€ ë§í¬ -->
    <div class="linkRow">
      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.yeosu.go.kr/www/govt/news/release/press" target="_blank" rel="noopener">ì—¬ìˆ˜ì‹œ ë³´ë„ìë£Œ(ë³µì§€/ì§€ì›)</a>
        <button class="qrBtn" onclick="toggleQR(this,'https://www.yeosu.go.kr/www/govt/news/release/press')">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.jeonnam.go.kr" target="_blank" rel="noopener">ì „ë¼ë‚¨ë„ì²­(ë³µì§€/ê³µì§€)</a>
        <button class="qrBtn" onclick="toggleQR(this,'https://www.jeonnam.go.kr')">QR</button>
      </div><div class="qrBox"></div></div>

      <div class="linkItem"><div class="linkTop">
        <a class="linkA" href="https://www.bokjiro.go.kr" target="_blank" rel="noopener">ë³µì§€ë¡œ(ì •ì±… ì•ˆë‚´)</a>
        <button class="qrBtn" onclick="toggleQR(this,'https://www.bokjiro.go.kr')">QR</button>
      </div><div class="qrBox"></div></div>
    </div>

    <div class="tiny" id="updateStatus"></div>
    <div class="tiny">â€» ìë™ ì—…ë°ì´íŠ¸ë¡œ â€œì†Œì‹ ë°˜ì˜â€ì€ ìœ ì§€ë˜ë©°, ì‹¤ì œ â€˜ë‰´ìŠ¤ ëª©ë¡ ì¶”ê°€â€™ëŠ” ì¶”í›„ ìë™ ìˆ˜ì§‘(ì„œë²„/DB) ë˜ëŠ” ìˆ˜ê¸° ì…ë ¥ ë°©ì‹ìœ¼ë¡œ ìš´ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
  </div>

  <div class="hint">
    â€» í•˜ë‹¨ 3ì¢…ì„¸íŠ¸(ë§í¬+ì„¤ì¹˜/ê³µìœ +QR)ëŠ” ì•ìœ¼ë¡œ ì–´ë–¤ ì½”ë”©ì—ì„œë„ í•­ìƒ í¬í•¨ë˜ë©°, <b>ì ˆëŒ€ ê³ ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</b>
  </div>

  <!-- âœ… ë¬´ì¡°ê±´: í˜ì´ì§€ ë§¨ ì•„ë˜ ë°°ì¹˜(ê³ ì • ê¸ˆì§€) -->
  <div class="bottomPack">
    <div class="bottomTitle">ğŸ“² ì½©ì¼€ì–´ ì•± ì„¤ì¹˜/ê³µìœ (ë°”íƒ•í™”ë©´ ë°”ë¡œê°€ê¸°)</div>
    <div class="bottomRow">
      <a class="bottomLink" href="https://kongcare.vercel.app/?install=1" target="_blank" rel="noopener">
        ì½©ì¼€ì–´ ì–´í”Œ ë§í¬ ì—´ê¸° (install=1)
      </a>
      <button class="bottomBtn" onclick="openInstallShare()">
        í™ˆí™”ë©´ ë°”ë¡œê°€ê¸° ì„¤ì¹˜ / ì¹´í†¡ ê³µìœ 
      </button>
    </div>

    <div class="bottomQR">
      <p class="t">QR ì°ê³  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</p>
      <p class="s">ì•„ë˜ QRì€ <b>install=1</b> ë§í¬ì…ë‹ˆë‹¤. (ì„¤ì¹˜ ì•ˆë‚´ ìë™ í‘œì‹œ)</p>
      <img alt="ì½©ì¼€ì–´ ì„¤ì¹˜ QR"
           src="https://api.qrserver.com/v1/create-qr-code/?size=190x190&data=https%3A%2F%2Fkongcare.vercel.app%2F%3Finstall%3D1">
      <p class="s" style="margin-top:10px">QR ì´ë¯¸ì§€ëŠ” ì¹´í†¡ìœ¼ë¡œ ì €ì¥/ê³µìœ í•´ë„ ë©ë‹ˆë‹¤.</p>
    </div>
  </div>

  <div class="foot">
    â€» ì£¼ìš” ë‚´ìš© ë³€ê²½ ì‹œ ìë™ ì—…ë°ì´íŠ¸ë¡œ ìµœì‹  ë°˜ì˜(3ì¼/03ì‹œ).<br>
    â€» ì§€ì›ì€ ê°œì¸ ì¡°ê±´Â·ì§€ì¹¨Â·ì˜ˆì‚°ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ìµœì¢… í™•ì¸ í•„ìš”.
  </div>
</div>

<script>
  // ë§í¬ ì•„ë˜ QR í† ê¸€
  function toggleQR(btn, url){
    const box = btn.parentElement.parentElement.querySelector('.qrBox');
    const open = box.style.display === 'block';
    if(open){ box.style.display='none'; box.innerHTML=''; return; }
    const imgUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=' + encodeURIComponent(url);
    box.innerHTML = '<div class="qrHint">QRì„ ì°ìœ¼ë©´ ì´ ë§í¬ë¡œ ë°”ë¡œ ì´ë™í•©ë‹ˆë‹¤</div><img alt="QR" src="'+imgUrl+'">';
    box.style.display='block';
  }

  // ì„¤ì¹˜/ê³µìœ 
  let deferredPrompt = null;
  window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; });

  async function openInstallShare(){
    const url = "https://kongcare.vercel.app/?install=1";
    const msg = "ì½©ì¼€ì–´ ë§í¬ì…ë‹ˆë‹¤: " + url;

    if(deferredPrompt){
      deferredPrompt.prompt();
      try{ await deferredPrompt.userChoice; }catch(e){}
      deferredPrompt = null;
      alert("ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ ì¹´í†¡ìœ¼ë¡œ ë§í¬ë¥¼ ê³µìœ í•´ ì£¼ì„¸ìš”.");
      return;
    }

    if(navigator.share){
      try{ await navigator.share({title:"ì½©ì¼€ì–´", text:msg, url}); return; }catch(e){}
    }
    try{
      await navigator.clipboard.writeText(msg);
      alert("ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤. ì¹´í†¡ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
    }catch(e){
      prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•´ ì¹´í†¡ì— ë³´ë‚´ì„¸ìš”:", msg);
    }
  }

  // ?install=1ë¡œ ë“¤ì–´ì˜¤ë©´ ì„¤ì¹˜ ì•ˆë‚´ í‘œì‹œ
  (function(){
    const p = new URLSearchParams(location.search);
    if(p.has("install")){
      const b = document.getElementById("installBanner");
      if(b) b.style.display = "block";
    }
  })();

  // ìë™ ì—…ë°ì´íŠ¸(3ì¼ ê°„ê²© / 03:00 KST) â†’ ìºì‹œ ìš°íšŒ ì¬ë¡œë“œ
  function nextRunKST(){
    const now = new Date();
    const kst = new Date(now.getTime() + (9*60 + now.getTimezoneOffset())*60*1000);
    const base = new Date(kst); base.setHours(3,0,0,0);
    let next = base;
    if(kst >= base) next = new Date(base.getTime() + 3*24*60*60*1000);
    const nextLocal = new Date(next.getTime() - (9*60 + now.getTimezoneOffset())*60*1000);
    return {kstNext:next, localNext:nextLocal};
  }
  (function scheduleAutoUpdate(){
    const {kstNext, localNext} = nextRunKST();
    const ms = Math.max(10_000, localNext.getTime() - Date.now());
    const st = document.getElementById("updateStatus");
    if(st){
      st.textContent = `ì—…ë°ì´íŠ¸ ìë™ ì²´í¬: 3ì¼ ê°„ê²© / 03:00(KST). ë‹¤ìŒ ì²´í¬: ${kstNext.toISOString().replace('T',' ').slice(0,16)} (KST)`;
    }
    setTimeout(()=>{ location.href = "/?v=" + Date.now(); }, ms);
  })();
</script>
</body>
</html>
